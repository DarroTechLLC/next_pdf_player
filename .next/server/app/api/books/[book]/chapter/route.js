"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/books/[book]/chapter/route";
exports.ids = ["app/api/books/[book]/chapter/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute&page=%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute.ts&appDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute&page=%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute.ts&appDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_anthonymiller_workspaces_next_book_reader_app_api_books_book_chapter_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/books/[book]/chapter/route.ts */ \"(rsc)/./app/api/books/[book]/chapter/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/books/[book]/chapter/route\",\n        pathname: \"/api/books/[book]/chapter\",\n        filename: \"route\",\n        bundlePath: \"app/api/books/[book]/chapter/route\"\n    },\n    resolvedPagePath: \"/Users/anthonymiller/workspaces/next_book_reader/app/api/books/[book]/chapter/route.ts\",\n    nextConfigOutput,\n    userland: _Users_anthonymiller_workspaces_next_book_reader_app_api_books_book_chapter_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/books/[book]/chapter/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZib29rcyUyRiU1QmJvb2slNUQlMkZjaGFwdGVyJTJGcm91dGUmcGFnZT0lMkZhcGklMkZib29rcyUyRiU1QmJvb2slNUQlMkZjaGFwdGVyJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYm9va3MlMkYlNUJib29rJTVEJTJGY2hhcHRlciUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFudGhvbnltaWxsZXIlMkZ3b3Jrc3BhY2VzJTJGbmV4dF9ib29rX3JlYWRlciUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhbnRob255bWlsbGVyJTJGd29ya3NwYWNlcyUyRm5leHRfYm9va19yZWFkZXImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3NDO0FBQ25IO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGRmLXR0cy1uZXh0Lz8xYmNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9hbnRob255bWlsbGVyL3dvcmtzcGFjZXMvbmV4dF9ib29rX3JlYWRlci9hcHAvYXBpL2Jvb2tzL1tib29rXS9jaGFwdGVyL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9ib29rcy9bYm9va10vY2hhcHRlci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2Jvb2tzL1tib29rXS9jaGFwdGVyXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ib29rcy9bYm9va10vY2hhcHRlci9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9hbnRob255bWlsbGVyL3dvcmtzcGFjZXMvbmV4dF9ib29rX3JlYWRlci9hcHAvYXBpL2Jvb2tzL1tib29rXS9jaGFwdGVyL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9ib29rcy9bYm9va10vY2hhcHRlci9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute&page=%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute.ts&appDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/books/[book]/chapter/route.ts":
/*!***********************************************!*\
  !*** ./app/api/books/[book]/chapter/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_pdf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/pdf */ \"(rsc)/./lib/pdf.ts\");\n\n\nasync function GET(req, { params }) {\n    console.log(`API: Fetching chapter text for book: ${params.book}`);\n    try {\n        const url = new URL(req.url);\n        const indexStr = url.searchParams.get(\"index\");\n        console.log(`API: Chapter index parameter: ${indexStr}`);\n        if (!indexStr) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"index required\"\n        }, {\n            status: 400\n        });\n        const idx = parseInt(indexStr, 10);\n        console.log(`API: Parsed chapter index: ${idx}`);\n        try {\n            console.log(`API: Calling extractChapters to find chapter info`);\n            const chapters = await (0,_lib_pdf__WEBPACK_IMPORTED_MODULE_1__.extractChapters)(params.book);\n            console.log(`API: Found ${chapters.length} chapters`);\n            const ch = chapters.find((c)=>c.id === idx);\n            if (!ch) {\n                console.log(`API: Chapter with id ${idx} not found`);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"chapter not found\"\n                }, {\n                    status: 404\n                });\n            }\n            console.log(`API: Found chapter: ${ch.title} (pages ${ch.startPage}-${ch.endPage})`);\n            console.log(`API: Calling extractTextForRange for pages ${ch.startPage}-${ch.endPage}`);\n            const text = await (0,_lib_pdf__WEBPACK_IMPORTED_MODULE_1__.extractTextForRange)(params.book, ch.startPage, ch.endPage);\n            console.log(`API: Extracted ${text.length} characters of text`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                chapter: ch,\n                text\n            });\n        } catch (error) {\n            console.error(\"Error extracting chapter text:\", error);\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to extract chapter text\",\n                details: errorMessage,\n                text: \"\"\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"Error in chapter API route:\", error);\n        const errorMessage = error instanceof Error ? error.message : String(error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\",\n            details: errorMessage,\n            text: \"\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2Jvb2tzL1tib29rXS9jaGFwdGVyL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNzQjtBQUUxRCxlQUFlRyxJQUNwQkMsR0FBWSxFQUNaLEVBQUVDLE1BQU0sRUFBZ0M7SUFFeENDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHFDQUFxQyxFQUFFRixPQUFPRyxJQUFJLENBQUMsQ0FBQztJQUNqRSxJQUFJO1FBQ0YsTUFBTUMsTUFBTSxJQUFJQyxJQUFJTixJQUFJSyxHQUFHO1FBQzNCLE1BQU1FLFdBQVdGLElBQUlHLFlBQVksQ0FBQ0MsR0FBRyxDQUFDO1FBQ3RDUCxRQUFRQyxHQUFHLENBQUMsQ0FBQyw4QkFBOEIsRUFBRUksU0FBUyxDQUFDO1FBQ3ZELElBQUksQ0FBQ0EsVUFBVSxPQUFPWCxxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBaUIsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFFbkYsTUFBTUMsTUFBTUMsU0FBU1AsVUFBVTtRQUMvQkwsUUFBUUMsR0FBRyxDQUFDLENBQUMsMkJBQTJCLEVBQUVVLElBQUksQ0FBQztRQUUvQyxJQUFJO1lBQ0ZYLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGlEQUFpRCxDQUFDO1lBQy9ELE1BQU1ZLFdBQVcsTUFBTWxCLHlEQUFlQSxDQUFDSSxPQUFPRyxJQUFJO1lBQ2xERixRQUFRQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUVZLFNBQVNDLE1BQU0sQ0FBQyxTQUFTLENBQUM7WUFFcEQsTUFBTUMsS0FBS0YsU0FBU0csSUFBSSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLEVBQUUsS0FBS1A7WUFDekMsSUFBSSxDQUFDSSxJQUFJO2dCQUNQZixRQUFRQyxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsRUFBRVUsSUFBSSxVQUFVLENBQUM7Z0JBQ25ELE9BQU9qQixxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO29CQUFFQyxPQUFPO2dCQUFvQixHQUFHO29CQUFFQyxRQUFRO2dCQUFJO1lBQ3pFO1lBQ0FWLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQixFQUFFYyxHQUFHSSxLQUFLLENBQUMsUUFBUSxFQUFFSixHQUFHSyxTQUFTLENBQUMsQ0FBQyxFQUFFTCxHQUFHTSxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBRW5GckIsUUFBUUMsR0FBRyxDQUFDLENBQUMsMkNBQTJDLEVBQUVjLEdBQUdLLFNBQVMsQ0FBQyxDQUFDLEVBQUVMLEdBQUdNLE9BQU8sQ0FBQyxDQUFDO1lBQ3RGLE1BQU1DLE9BQU8sTUFBTTFCLDZEQUFtQkEsQ0FBQ0csT0FBT0csSUFBSSxFQUFFYSxHQUFHSyxTQUFTLEVBQUVMLEdBQUdNLE9BQU87WUFDNUVyQixRQUFRQyxHQUFHLENBQUMsQ0FBQyxlQUFlLEVBQUVxQixLQUFLUixNQUFNLENBQUMsbUJBQW1CLENBQUM7WUFDOUQsT0FBT3BCLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7Z0JBQUVlLFNBQVNSO2dCQUFJTztZQUFLO1FBQy9DLEVBQUUsT0FBT2IsT0FBTztZQUNkVCxRQUFRUyxLQUFLLENBQUMsa0NBQWtDQTtZQUNoRCxNQUFNZSxlQUFlZixpQkFBaUJnQixRQUFRaEIsTUFBTWlCLE9BQU8sR0FBR0MsT0FBT2xCO1lBQ3JFLE9BQU9mLHFEQUFZQSxDQUFDYyxJQUFJLENBQUM7Z0JBQ3ZCQyxPQUFPO2dCQUNQbUIsU0FBU0o7Z0JBQ1RGLE1BQU07WUFDUixHQUFHO2dCQUFFWixRQUFRO1lBQUk7UUFDbkI7SUFDRixFQUFFLE9BQU9ELE9BQU87UUFDZFQsUUFBUVMsS0FBSyxDQUFDLCtCQUErQkE7UUFDN0MsTUFBTWUsZUFBZWYsaUJBQWlCZ0IsUUFBUWhCLE1BQU1pQixPQUFPLEdBQUdDLE9BQU9sQjtRQUNyRSxPQUFPZixxREFBWUEsQ0FBQ2MsSUFBSSxDQUFDO1lBQ3ZCQyxPQUFPO1lBQ1BtQixTQUFTSjtZQUNURixNQUFNO1FBQ1IsR0FBRztZQUFFWixRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BkZi10dHMtbmV4dC8uL2FwcC9hcGkvYm9va3MvW2Jvb2tdL2NoYXB0ZXIvcm91dGUudHM/YTY3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGV4dHJhY3RDaGFwdGVycywgZXh0cmFjdFRleHRGb3JSYW5nZSB9IGZyb20gXCJAL2xpYi9wZGZcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcbiAgcmVxOiBSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBib29rOiBzdHJpbmcgfSB9XG4pIHtcbiAgY29uc29sZS5sb2coYEFQSTogRmV0Y2hpbmcgY2hhcHRlciB0ZXh0IGZvciBib29rOiAke3BhcmFtcy5ib29rfWApO1xuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybCk7XG4gICAgY29uc3QgaW5kZXhTdHIgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImluZGV4XCIpO1xuICAgIGNvbnNvbGUubG9nKGBBUEk6IENoYXB0ZXIgaW5kZXggcGFyYW1ldGVyOiAke2luZGV4U3RyfWApO1xuICAgIGlmICghaW5kZXhTdHIpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcImluZGV4IHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcblxuICAgIGNvbnN0IGlkeCA9IHBhcnNlSW50KGluZGV4U3RyLCAxMCk7XG4gICAgY29uc29sZS5sb2coYEFQSTogUGFyc2VkIGNoYXB0ZXIgaW5kZXg6ICR7aWR4fWApO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBBUEk6IENhbGxpbmcgZXh0cmFjdENoYXB0ZXJzIHRvIGZpbmQgY2hhcHRlciBpbmZvYCk7XG4gICAgICBjb25zdCBjaGFwdGVycyA9IGF3YWl0IGV4dHJhY3RDaGFwdGVycyhwYXJhbXMuYm9vayk7XG4gICAgICBjb25zb2xlLmxvZyhgQVBJOiBGb3VuZCAke2NoYXB0ZXJzLmxlbmd0aH0gY2hhcHRlcnNgKTtcblxuICAgICAgY29uc3QgY2ggPSBjaGFwdGVycy5maW5kKChjKSA9PiBjLmlkID09PSBpZHgpO1xuICAgICAgaWYgKCFjaCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgQVBJOiBDaGFwdGVyIHdpdGggaWQgJHtpZHh9IG5vdCBmb3VuZGApO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJjaGFwdGVyIG5vdCBmb3VuZFwiIH0sIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgQVBJOiBGb3VuZCBjaGFwdGVyOiAke2NoLnRpdGxlfSAocGFnZXMgJHtjaC5zdGFydFBhZ2V9LSR7Y2guZW5kUGFnZX0pYCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKGBBUEk6IENhbGxpbmcgZXh0cmFjdFRleHRGb3JSYW5nZSBmb3IgcGFnZXMgJHtjaC5zdGFydFBhZ2V9LSR7Y2guZW5kUGFnZX1gKTtcbiAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBleHRyYWN0VGV4dEZvclJhbmdlKHBhcmFtcy5ib29rLCBjaC5zdGFydFBhZ2UsIGNoLmVuZFBhZ2UpO1xuICAgICAgY29uc29sZS5sb2coYEFQSTogRXh0cmFjdGVkICR7dGV4dC5sZW5ndGh9IGNoYXJhY3RlcnMgb2YgdGV4dGApO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgY2hhcHRlcjogY2gsIHRleHQgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBleHRyYWN0aW5nIGNoYXB0ZXIgdGV4dDpcIiwgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBleHRyYWN0IGNoYXB0ZXIgdGV4dFwiLCBcbiAgICAgICAgZGV0YWlsczogZXJyb3JNZXNzYWdlLCBcbiAgICAgICAgdGV4dDogXCJcIiBcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBjaGFwdGVyIEFQSSByb3V0ZTpcIiwgZXJyb3IpO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLCBcbiAgICAgIGRldGFpbHM6IGVycm9yTWVzc2FnZSwgXG4gICAgICB0ZXh0OiBcIlwiIFxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJleHRyYWN0Q2hhcHRlcnMiLCJleHRyYWN0VGV4dEZvclJhbmdlIiwiR0VUIiwicmVxIiwicGFyYW1zIiwiY29uc29sZSIsImxvZyIsImJvb2siLCJ1cmwiLCJVUkwiLCJpbmRleFN0ciIsInNlYXJjaFBhcmFtcyIsImdldCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImlkeCIsInBhcnNlSW50IiwiY2hhcHRlcnMiLCJsZW5ndGgiLCJjaCIsImZpbmQiLCJjIiwiaWQiLCJ0aXRsZSIsInN0YXJ0UGFnZSIsImVuZFBhZ2UiLCJ0ZXh0IiwiY2hhcHRlciIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwibWVzc2FnZSIsIlN0cmluZyIsImRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/books/[book]/chapter/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/pdf.ts":
/*!********************!*\
  !*** ./lib/pdf.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PDF_DIR: () => (/* binding */ PDF_DIR),\n/* harmony export */   extractChapters: () => (/* binding */ extractChapters),\n/* harmony export */   extractTextForRange: () => (/* binding */ extractTextForRange),\n/* harmony export */   listBooks: () => (/* binding */ listBooks)\n/* harmony export */ });\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var pdfjs_dist_legacy_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pdfjs-dist/legacy/build/pdf.mjs */ \"(rsc)/./node_modules/pdfjs-dist/legacy/build/pdf.mjs\");\n\n\n// Use legacy build for Node.js environment\n\n// Configure PDF.js for Node environment\n// Try to use a path-based approach for the worker\nconst workerPath = node_path__WEBPACK_IMPORTED_MODULE_0___default().join(process.cwd(), \"node_modules\", \"pdfjs-dist\", \"build\", \"pdf.worker.mjs\");\npdfjs_dist_legacy_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_2__.GlobalWorkerOptions.workerSrc = workerPath;\n// Use path.resolve to ensure we get an absolute path\nconst PDF_DIR = node_path__WEBPACK_IMPORTED_MODULE_0___default().resolve(process.cwd(), \"public\", \"pdfs\");\nasync function listBooks() {\n    try {\n        console.log(`Reading directory: ${PDF_DIR}`);\n        // First check if the directory exists\n        try {\n            await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().access(PDF_DIR);\n        } catch (err) {\n            console.error(`Directory ${PDF_DIR} does not exist or is not accessible`);\n            // Create the directory if it doesn't exist\n            await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir(PDF_DIR, {\n                recursive: true\n            });\n            return []; // Return empty array since we just created the directory\n        }\n        // Read all files in the directory\n        const files = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readdir(PDF_DIR);\n        // Filter for PDF files\n        const pdfFiles = [];\n        for (const file of files){\n            try {\n                const stat = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().stat(node_path__WEBPACK_IMPORTED_MODULE_0___default().join(PDF_DIR, file));\n                if (stat.isFile() && file.toLowerCase().endsWith(\".pdf\")) {\n                    pdfFiles.push(file);\n                }\n            } catch (err) {\n                console.error(`Error checking file ${file}:`, err);\n            // Continue with other files\n            }\n        }\n        console.log(`Found ${pdfFiles.length} PDF files`);\n        return pdfFiles;\n    } catch (error) {\n        console.error(`Error reading directory ${PDF_DIR}:`, error);\n        throw error;\n    }\n}\nconst CHAPTER_PATTERNS = [\n    /^\\s*chapter\\s+\\d+\\s*:/i,\n    /^\\s*chapter\\s+\\d+\\s*[a-zA-Z]/i,\n    /^\\s*chapter\\s+[ivxlcdm]+\\s*:/i,\n    /^\\s*chapter\\s+[ivxlcdm]+\\s*[a-zA-Z]/i,\n    /^\\s*ch\\.\\s*\\d+\\s*:/i,\n    /^\\s*ch\\.\\s*\\d+\\s*[a-zA-Z]/i,\n    /^\\s*book\\s+\\d+\\s*:/i,\n    /^\\s*book\\s+\\d+\\s*[a-zA-Z]/i,\n    /^\\s*part\\s+\\d+\\s*:/i,\n    /^\\s*part\\s+\\d+\\s*[a-zA-Z]/i\n];\nfunction looksLikeChapterHeading(line) {\n    const s = line.trim();\n    if (s.length === 0 || s.length > 80) return false;\n    // Must start with \"Chapter\" or similar\n    if (!/^(chapter|ch\\.|book|part)\\s+/i.test(s)) return false;\n    // Must contain a number or roman numeral\n    if (!/\\d+|[ivxlcdm]+/i.test(s)) return false;\n    // Must have some descriptive text after the number\n    const parts = s.split(/\\s+/);\n    if (parts.length < 3) return false;\n    // Check if there's meaningful text after the chapter identifier\n    const meaningfulText = parts.slice(2).join(\" \");\n    if (meaningfulText.length < 3) return false;\n    // Exclude appendix sections, rubrics, etc.\n    if (/rubric|appendix|case study|promise cards/i.test(meaningfulText)) return false;\n    return true;\n}\nfunction looksLikeAllCapsHeading(line) {\n    const s = line.trim();\n    if (s.length === 0 || s.length > 60) return false;\n    // Must be reasonably long to be a heading\n    if (s.length < 10) return false;\n    const letters = s.replace(/[^A-Za-z]/g, \"\");\n    if (letters.length < 5) return false; // Require more letters\n    // Must be all caps\n    if (s !== s.toUpperCase()) return false;\n    // Must not be just repeated characters or very short words\n    const words = s.split(/\\s+/);\n    if (words.length < 2) return false;\n    // Check if it looks like a meaningful heading (not just random caps)\n    const hasMeaningfulWords = words.some((word)=>word.length > 2);\n    if (!hasMeaningfulWords) return false;\n    // Exclude appendix sections, rubrics, etc.\n    if (/rubric|appendix|case study|promise cards/i.test(s)) return false;\n    return true;\n}\nasync function extractChapters(bookFileName) {\n    console.log(`Extracting chapters from ${bookFileName}`);\n    const filePath = node_path__WEBPACK_IMPORTED_MODULE_0___default().resolve(PDF_DIR, bookFileName);\n    console.log(`Full path: ${filePath}`);\n    try {\n        // Check if file exists\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().access(filePath);\n        console.log(`File exists: ${filePath}`);\n    } catch (err) {\n        console.error(`File does not exist: ${filePath}`);\n        throw new Error(`PDF file not found: ${bookFileName}`);\n    }\n    console.log(`Reading file: ${filePath}`);\n    const buffer = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(filePath);\n    console.log(`File size: ${buffer.length} bytes`);\n    const data = new Uint8Array(buffer);\n    console.log(`Creating PDF.js document`);\n    const loadingTask = pdfjs_dist_legacy_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_2__.getDocument({\n        data,\n        disableWorker: true\n    });\n    console.log(`Waiting for PDF to load`);\n    const pdf = await loadingTask.promise;\n    const numPages = pdf.numPages;\n    console.log(`PDF loaded with ${numPages} pages`);\n    const hits = [];\n    // Scan first ~50 lines per page for heading candidates\n    console.log(`Starting to scan ${numPages} pages for chapter headings`);\n    for(let i = 1; i <= numPages; i++){\n        try {\n            console.log(`Processing page ${i}/${numPages}`);\n            const page = await pdf.getPage(i);\n            console.log(`Getting text content for page ${i}`);\n            const tc = await page.getTextContent();\n            // Join into lines\n            const items = tc.items;\n            const raw = items.map((it)=>it.str).join(\"\\n\");\n            const lines = raw.split(/\\r?\\n/).map((l)=>l.trim()).filter(Boolean).slice(0, 60);\n            console.log(`Found ${lines.length} lines of text on page ${i}`);\n            const found = lines.find((ln)=>CHAPTER_PATTERNS.some((re)=>re.test(ln)) || looksLikeChapterHeading(ln) || looksLikeAllCapsHeading(ln));\n            if (found) {\n                console.log(`Found chapter heading on page ${i}: \"${found}\"`);\n                hits.push({\n                    page: i,\n                    title: found.replace(/\\s+/g, \" \").trim()\n                });\n            }\n        } catch (err) {\n            console.error(`Error processing page ${i}:`, err);\n        // Continue with next page\n        }\n    }\n    console.log(`Finished scanning pages, found ${hits.length} potential chapter headings`);\n    let chapters = [];\n    if (hits.length === 0) {\n        chapters = [\n            {\n                id: 1,\n                title: \"Full Document\",\n                startPage: 1,\n                endPage: numPages\n            }\n        ];\n    } else {\n        // Dedup similar headings and build ranges\n        const uniq = [];\n        for(let i = 0; i < hits.length; i++){\n            const current = hits[i];\n            const prev = uniq[uniq.length - 1];\n            // Skip if this is the same heading on a different page\n            if (prev && current.title.toLowerCase() === prev.title.toLowerCase()) {\n                continue;\n            }\n            // Skip if this is just a continuation of the same chapter\n            if (prev && current.page - prev.page < 3) {\n                continue;\n            }\n            uniq.push(current);\n        }\n        console.log(`After deduplication, found ${uniq.length} unique chapter headings`);\n        // Build chapter ranges\n        for(let i = 0; i < uniq.length; i++){\n            const start = uniq[i].page;\n            const end = i + 1 < uniq.length ? uniq[i + 1].page - 1 : numPages;\n            let title = uniq[i].title;\n            // Normalize chapter titles\n            if (/^\\s*chapter\\b/i.test(title)) {\n                title = title.replace(/^\\s*chapter\\s*/i, \"\").replace(/\\s+/g, \" \").trim();\n                title = `Chapter ${title}`;\n            }\n            chapters.push({\n                id: i + 1,\n                title,\n                startPage: start,\n                endPage: end\n            });\n        }\n        // Post-process: filter to only main numbered chapters (1-22) and merge duplicates\n        const chapterMap = new Map();\n        chapters.forEach((ch)=>{\n            const chapterMatch = ch.title.match(/^Chapter\\s+(\\d+)/i);\n            if (!chapterMatch) return;\n            const chapterNum = parseInt(chapterMatch[1]);\n            if (chapterNum < 1 || chapterNum > 22) return;\n            // If we already have this chapter number, merge them\n            if (chapterMap.has(chapterNum)) {\n                const existing = chapterMap.get(chapterNum);\n                // Use the longer title and merge the page ranges\n                if (ch.title.length > existing.title.length) {\n                    existing.title = ch.title;\n                }\n                existing.endPage = Math.max(existing.endPage, ch.endPage);\n            } else {\n                chapterMap.set(chapterNum, {\n                    ...ch,\n                    id: chapterNum\n                });\n            }\n        });\n        if (chapterMap.size > 0) {\n            console.log(`Filtered to ${chapterMap.size} main chapters (1-22)`);\n            chapters = Array.from(chapterMap.values()).sort((a, b)=>a.id - b.id);\n            // Refine chapter boundaries to exclude appendix content\n            for(let i = 0; i < chapters.length; i++){\n                const current = chapters[i];\n                const next = chapters[i + 1];\n                // If this chapter spans too many pages, it might include appendix content\n                if (current.endPage - current.startPage > 100) {\n                    // Look for the next chapter start to get a better boundary\n                    if (next) {\n                        current.endPage = next.startPage - 1;\n                    } else {\n                        // For the last chapter, limit it to a reasonable size\n                        current.endPage = Math.min(current.endPage, current.startPage + 50);\n                    }\n                }\n            }\n        }\n    }\n    return chapters;\n}\nasync function extractTextForRange(bookFileName, startPage, endPage) {\n    console.log(`Extracting text from ${bookFileName} pages ${startPage}-${endPage}`);\n    const filePath = node_path__WEBPACK_IMPORTED_MODULE_0___default().resolve(PDF_DIR, bookFileName);\n    console.log(`Full path: ${filePath}`);\n    try {\n        // Check if file exists\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().access(filePath);\n        console.log(`File exists: ${filePath}`);\n    } catch (err) {\n        console.error(`File does not exist: ${filePath}`);\n        throw new Error(`PDF file not found: ${bookFileName}`);\n    }\n    console.log(`Reading file: ${filePath}`);\n    const buffer = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(filePath);\n    console.log(`File size: ${buffer.length} bytes`);\n    const data = new Uint8Array(buffer);\n    console.log(`Creating PDF.js document`);\n    const loadingTask = pdfjs_dist_legacy_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_2__.getDocument({\n        data,\n        disableWorker: true\n    });\n    console.log(`Waiting for PDF to load`);\n    const pdf = await loadingTask.promise;\n    console.log(`PDF loaded with ${pdf.numPages} pages`);\n    const parts = [];\n    const s = Math.max(1, startPage);\n    const e = Math.min(endPage, pdf.numPages);\n    console.log(`Extracting text from pages ${s} to ${e}`);\n    for(let i = s; i <= e; i++){\n        try {\n            console.log(`Processing page ${i}/${e}`);\n            const page = await pdf.getPage(i);\n            console.log(`Getting text content for page ${i}`);\n            const tc = await page.getTextContent();\n            const items = tc.items;\n            const pageText = items.map((it)=>it.str).join(\"\\n\");\n            console.log(`Extracted ${pageText.length} characters from page ${i}`);\n            parts.push(pageText);\n        } catch (err) {\n            console.error(`Error processing page ${i}:`, err);\n            // Continue with next page\n            parts.push(`[Error extracting text from page ${i}]`);\n        }\n    }\n    console.log(`Finished extracting text from ${e - s + 1} pages`);\n    // Basic cleanups\n    const text = parts.join(\"\\n\\n\").replace(/\\u00A0/g, \" \").replace(/[ \\t]+\\n/g, \"\\n\").replace(/\\n{3,}/g, \"\\n\\n\").trim();\n    return text;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVLEVBQUVzRyxTQUFTdkYsTUFBTSxDQUFDLHNCQUFzQixFQUFFa0MsRUFBRSxDQUFDO1lBQ3BFM0IsTUFBTVIsSUFBSSxDQUFDd0Y7UUFDYixFQUFFLE9BQU9wRyxLQUFLO1lBQ1pILFFBQVFJLEtBQUssQ0FBQyxDQUFDLHNCQUFzQixFQUFFOEMsRUFBRSxDQUFDLENBQUMsRUFBRS9DO1lBQzdDLDBCQUEwQjtZQUMxQm9CLE1BQU1SLElBQUksQ0FBQyxDQUFDLGlDQUFpQyxFQUFFbUMsRUFBRSxDQUFDLENBQUM7UUFDckQ7SUFDRjtJQUNBbEQsUUFBUUMsR0FBRyxDQUFDLENBQUMsOEJBQThCLEVBQUVxRyxJQUFFbEYsSUFBRSxFQUFFLE1BQU0sQ0FBQztJQUUxRCxpQkFBaUI7SUFDakIsTUFBTW9GLE9BQU9qRixNQUFNL0IsSUFBSSxDQUFDLFFBQ3JCcUMsT0FBTyxDQUFDLFdBQVcsS0FDbkJBLE9BQU8sQ0FBQyxhQUFhLE1BQ3JCQSxPQUFPLENBQUMsV0FBVyxRQUNuQlIsSUFBSTtJQUVQLE9BQU9tRjtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGRmLXR0cy1uZXh0Ly4vbGliL3BkZi50cz8yMjE1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gXCJub2RlOnBhdGhcIjtcbmltcG9ydCBmcyBmcm9tIFwibm9kZTpmcy9wcm9taXNlc1wiO1xuXG4vLyBVc2UgbGVnYWN5IGJ1aWxkIGZvciBOb2RlLmpzIGVudmlyb25tZW50XG5pbXBvcnQgKiBhcyBwZGZqc0xpYiBmcm9tIFwicGRmanMtZGlzdC9sZWdhY3kvYnVpbGQvcGRmLm1qc1wiO1xuXG4vLyBDb25maWd1cmUgUERGLmpzIGZvciBOb2RlIGVudmlyb25tZW50XG4vLyBUcnkgdG8gdXNlIGEgcGF0aC1iYXNlZCBhcHByb2FjaCBmb3IgdGhlIHdvcmtlclxuY29uc3Qgd29ya2VyUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnbm9kZV9tb2R1bGVzJywgJ3BkZmpzLWRpc3QnLCAnYnVpbGQnLCAncGRmLndvcmtlci5tanMnKTtcbnBkZmpzTGliLkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjID0gd29ya2VyUGF0aDtcblxuLy8gVXNlIHBhdGgucmVzb2x2ZSB0byBlbnN1cmUgd2UgZ2V0IGFuIGFic29sdXRlIHBhdGhcbmV4cG9ydCBjb25zdCBQREZfRElSID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksIFwicHVibGljXCIsIFwicGRmc1wiKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RCb29rcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coYFJlYWRpbmcgZGlyZWN0b3J5OiAke1BERl9ESVJ9YCk7XG5cbiAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGUgZGlyZWN0b3J5IGV4aXN0c1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBmcy5hY2Nlc3MoUERGX0RJUik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBEaXJlY3RvcnkgJHtQREZfRElSfSBkb2VzIG5vdCBleGlzdCBvciBpcyBub3QgYWNjZXNzaWJsZWApO1xuICAgICAgLy8gQ3JlYXRlIHRoZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgYXdhaXQgZnMubWtkaXIoUERGX0RJUiwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICByZXR1cm4gW107IC8vIFJldHVybiBlbXB0eSBhcnJheSBzaW5jZSB3ZSBqdXN0IGNyZWF0ZWQgdGhlIGRpcmVjdG9yeVxuICAgIH1cblxuICAgIC8vIFJlYWQgYWxsIGZpbGVzIGluIHRoZSBkaXJlY3RvcnlcbiAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGZzLnJlYWRkaXIoUERGX0RJUik7XG5cbiAgICAvLyBGaWx0ZXIgZm9yIFBERiBmaWxlc1xuICAgIGNvbnN0IHBkZkZpbGVzID0gW107XG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdGF0ID0gYXdhaXQgZnMuc3RhdChwYXRoLmpvaW4oUERGX0RJUiwgZmlsZSkpO1xuICAgICAgICBpZiAoc3RhdC5pc0ZpbGUoKSAmJiBmaWxlLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5wZGYnKSkge1xuICAgICAgICAgIHBkZkZpbGVzLnB1c2goZmlsZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjaGVja2luZyBmaWxlICR7ZmlsZX06YCwgZXJyKTtcbiAgICAgICAgLy8gQ29udGludWUgd2l0aCBvdGhlciBmaWxlc1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke3BkZkZpbGVzLmxlbmd0aH0gUERGIGZpbGVzYCk7XG4gICAgcmV0dXJuIHBkZkZpbGVzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlYWRpbmcgZGlyZWN0b3J5ICR7UERGX0RJUn06YCwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbnR5cGUgQ2hhcHRlciA9IHsgaWQ6IG51bWJlcjsgdGl0bGU6IHN0cmluZzsgc3RhcnRQYWdlOiBudW1iZXI7IGVuZFBhZ2U6IG51bWJlciB9O1xuXG5jb25zdCBDSEFQVEVSX1BBVFRFUk5TID0gW1xuICAvXlxccypjaGFwdGVyXFxzK1xcZCtcXHMqOi9pLFxuICAvXlxccypjaGFwdGVyXFxzK1xcZCtcXHMqW2EtekEtWl0vaSxcbiAgL15cXHMqY2hhcHRlclxccytbaXZ4bGNkbV0rXFxzKjovaSxcbiAgL15cXHMqY2hhcHRlclxccytbaXZ4bGNkbV0rXFxzKlthLXpBLVpdL2ksXG4gIC9eXFxzKmNoXFwuXFxzKlxcZCtcXHMqOi9pLFxuICAvXlxccypjaFxcLlxccypcXGQrXFxzKlthLXpBLVpdL2ksXG4gIC9eXFxzKmJvb2tcXHMrXFxkK1xccyo6L2ksXG4gIC9eXFxzKmJvb2tcXHMrXFxkK1xccypbYS16QS1aXS9pLFxuICAvXlxccypwYXJ0XFxzK1xcZCtcXHMqOi9pLFxuICAvXlxccypwYXJ0XFxzK1xcZCtcXHMqW2EtekEtWl0vaVxuXTtcblxuZnVuY3Rpb24gbG9va3NMaWtlQ2hhcHRlckhlYWRpbmcobGluZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHMgPSBsaW5lLnRyaW0oKTtcbiAgaWYgKHMubGVuZ3RoID09PSAwIHx8IHMubGVuZ3RoID4gODApIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIE11c3Qgc3RhcnQgd2l0aCBcIkNoYXB0ZXJcIiBvciBzaW1pbGFyXG4gIGlmICghL14oY2hhcHRlcnxjaFxcLnxib29rfHBhcnQpXFxzKy9pLnRlc3QocykpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIE11c3QgY29udGFpbiBhIG51bWJlciBvciByb21hbiBudW1lcmFsXG4gIGlmICghL1xcZCt8W2l2eGxjZG1dKy9pLnRlc3QocykpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIE11c3QgaGF2ZSBzb21lIGRlc2NyaXB0aXZlIHRleHQgYWZ0ZXIgdGhlIG51bWJlclxuICBjb25zdCBwYXJ0cyA9IHMuc3BsaXQoL1xccysvKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA8IDMpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIENoZWNrIGlmIHRoZXJlJ3MgbWVhbmluZ2Z1bCB0ZXh0IGFmdGVyIHRoZSBjaGFwdGVyIGlkZW50aWZpZXJcbiAgY29uc3QgbWVhbmluZ2Z1bFRleHQgPSBwYXJ0cy5zbGljZSgyKS5qb2luKFwiIFwiKTtcbiAgaWYgKG1lYW5pbmdmdWxUZXh0Lmxlbmd0aCA8IDMpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIEV4Y2x1ZGUgYXBwZW5kaXggc2VjdGlvbnMsIHJ1YnJpY3MsIGV0Yy5cbiAgaWYgKC9ydWJyaWN8YXBwZW5kaXh8Y2FzZSBzdHVkeXxwcm9taXNlIGNhcmRzL2kudGVzdChtZWFuaW5nZnVsVGV4dCkpIHJldHVybiBmYWxzZTtcbiAgXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBsb29rc0xpa2VBbGxDYXBzSGVhZGluZyhsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgcyA9IGxpbmUudHJpbSgpO1xuICBpZiAocy5sZW5ndGggPT09IDAgfHwgcy5sZW5ndGggPiA2MCkgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8gTXVzdCBiZSByZWFzb25hYmx5IGxvbmcgdG8gYmUgYSBoZWFkaW5nXG4gIGlmIChzLmxlbmd0aCA8IDEwKSByZXR1cm4gZmFsc2U7XG4gIFxuICBjb25zdCBsZXR0ZXJzID0gcy5yZXBsYWNlKC9bXkEtWmEtel0vZywgXCJcIik7XG4gIGlmIChsZXR0ZXJzLmxlbmd0aCA8IDUpIHJldHVybiBmYWxzZTsgLy8gUmVxdWlyZSBtb3JlIGxldHRlcnNcbiAgXG4gIC8vIE11c3QgYmUgYWxsIGNhcHNcbiAgaWYgKHMgIT09IHMudG9VcHBlckNhc2UoKSkgcmV0dXJuIGZhbHNlO1xuICBcbiAgLy8gTXVzdCBub3QgYmUganVzdCByZXBlYXRlZCBjaGFyYWN0ZXJzIG9yIHZlcnkgc2hvcnQgd29yZHNcbiAgY29uc3Qgd29yZHMgPSBzLnNwbGl0KC9cXHMrLyk7XG4gIGlmICh3b3Jkcy5sZW5ndGggPCAyKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBDaGVjayBpZiBpdCBsb29rcyBsaWtlIGEgbWVhbmluZ2Z1bCBoZWFkaW5nIChub3QganVzdCByYW5kb20gY2FwcylcbiAgY29uc3QgaGFzTWVhbmluZ2Z1bFdvcmRzID0gd29yZHMuc29tZSh3b3JkID0+IHdvcmQubGVuZ3RoID4gMik7XG4gIGlmICghaGFzTWVhbmluZ2Z1bFdvcmRzKSByZXR1cm4gZmFsc2U7XG4gIFxuICAvLyBFeGNsdWRlIGFwcGVuZGl4IHNlY3Rpb25zLCBydWJyaWNzLCBldGMuXG4gIGlmICgvcnVicmljfGFwcGVuZGl4fGNhc2Ugc3R1ZHl8cHJvbWlzZSBjYXJkcy9pLnRlc3QocykpIHJldHVybiBmYWxzZTtcbiAgXG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdENoYXB0ZXJzKGJvb2tGaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxDaGFwdGVyW10+IHtcbiAgY29uc29sZS5sb2coYEV4dHJhY3RpbmcgY2hhcHRlcnMgZnJvbSAke2Jvb2tGaWxlTmFtZX1gKTtcbiAgY29uc3QgZmlsZVBhdGggPSBwYXRoLnJlc29sdmUoUERGX0RJUiwgYm9va0ZpbGVOYW1lKTtcbiAgY29uc29sZS5sb2coYEZ1bGwgcGF0aDogJHtmaWxlUGF0aH1gKTtcblxuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIGZpbGUgZXhpc3RzXG4gICAgYXdhaXQgZnMuYWNjZXNzKGZpbGVQYXRoKTtcbiAgICBjb25zb2xlLmxvZyhgRmlsZSBleGlzdHM6ICR7ZmlsZVBhdGh9YCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEZpbGUgZG9lcyBub3QgZXhpc3Q6ICR7ZmlsZVBhdGh9YCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBQREYgZmlsZSBub3QgZm91bmQ6ICR7Ym9va0ZpbGVOYW1lfWApO1xuICB9XG5cbiAgY29uc29sZS5sb2coYFJlYWRpbmcgZmlsZTogJHtmaWxlUGF0aH1gKTtcbiAgY29uc3QgYnVmZmVyID0gYXdhaXQgZnMucmVhZEZpbGUoZmlsZVBhdGgpO1xuICBjb25zb2xlLmxvZyhgRmlsZSBzaXplOiAke2J1ZmZlci5sZW5ndGh9IGJ5dGVzYCk7XG5cbiAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gIGNvbnNvbGUubG9nKGBDcmVhdGluZyBQREYuanMgZG9jdW1lbnRgKTtcbiAgY29uc3QgbG9hZGluZ1Rhc2sgPSBwZGZqc0xpYi5nZXREb2N1bWVudCh7IFxuICAgIGRhdGEsIFxuICAgIGRpc2FibGVXb3JrZXI6IHRydWVcbiAgfSk7XG5cbiAgY29uc29sZS5sb2coYFdhaXRpbmcgZm9yIFBERiB0byBsb2FkYCk7XG4gIGNvbnN0IHBkZiA9IGF3YWl0IGxvYWRpbmdUYXNrLnByb21pc2U7XG4gIGNvbnN0IG51bVBhZ2VzOiBudW1iZXIgPSBwZGYubnVtUGFnZXM7XG4gIGNvbnNvbGUubG9nKGBQREYgbG9hZGVkIHdpdGggJHtudW1QYWdlc30gcGFnZXNgKTtcblxuICB0eXBlIEhpdCA9IHsgcGFnZTogbnVtYmVyOyB0aXRsZTogc3RyaW5nIH07XG4gIGNvbnN0IGhpdHM6IEhpdFtdID0gW107XG5cbiAgLy8gU2NhbiBmaXJzdCB+NTAgbGluZXMgcGVyIHBhZ2UgZm9yIGhlYWRpbmcgY2FuZGlkYXRlc1xuICBjb25zb2xlLmxvZyhgU3RhcnRpbmcgdG8gc2NhbiAke251bVBhZ2VzfSBwYWdlcyBmb3IgY2hhcHRlciBoZWFkaW5nc2ApO1xuICBmb3IgKGxldCBpID0gMTsgaSA8PSBudW1QYWdlczsgaSsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHBhZ2UgJHtpfS8ke251bVBhZ2VzfWApO1xuICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IHBkZi5nZXRQYWdlKGkpO1xuICAgICAgY29uc29sZS5sb2coYEdldHRpbmcgdGV4dCBjb250ZW50IGZvciBwYWdlICR7aX1gKTtcbiAgICAgIGNvbnN0IHRjID0gYXdhaXQgcGFnZS5nZXRUZXh0Q29udGVudCgpO1xuICAgICAgLy8gSm9pbiBpbnRvIGxpbmVzXG4gICAgICBjb25zdCBpdGVtcyA9IHRjLml0ZW1zIGFzIEFycmF5PHsgc3RyOiBzdHJpbmcgfT47XG4gICAgICBjb25zdCByYXcgPSBpdGVtcy5tYXAoKGl0KSA9PiBpdC5zdHIpLmpvaW4oXCJcXG5cIik7XG4gICAgICBjb25zdCBsaW5lcyA9IHJhdy5zcGxpdCgvXFxyP1xcbi8pLm1hcCgobCkgPT4gbC50cmltKCkpLmZpbHRlcihCb29sZWFuKS5zbGljZSgwLCA2MCk7XG4gICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtsaW5lcy5sZW5ndGh9IGxpbmVzIG9mIHRleHQgb24gcGFnZSAke2l9YCk7XG5cbiAgICAgIGNvbnN0IGZvdW5kID0gbGluZXMuZmluZCgobG4pID0+IFxuICAgICAgICBDSEFQVEVSX1BBVFRFUk5TLnNvbWUoKHJlKSA9PiByZS50ZXN0KGxuKSkgfHwgXG4gICAgICAgIGxvb2tzTGlrZUNoYXB0ZXJIZWFkaW5nKGxuKSB8fCBcbiAgICAgICAgbG9va3NMaWtlQWxsQ2Fwc0hlYWRpbmcobG4pXG4gICAgICApO1xuICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCBjaGFwdGVyIGhlYWRpbmcgb24gcGFnZSAke2l9OiBcIiR7Zm91bmR9XCJgKTtcbiAgICAgICAgaGl0cy5wdXNoKHsgcGFnZTogaSwgdGl0bGU6IGZvdW5kLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKSB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgcGFnZSAke2l9OmAsIGVycik7XG4gICAgICAvLyBDb250aW51ZSB3aXRoIG5leHQgcGFnZVxuICAgIH1cbiAgfVxuICBjb25zb2xlLmxvZyhgRmluaXNoZWQgc2Nhbm5pbmcgcGFnZXMsIGZvdW5kICR7aGl0cy5sZW5ndGh9IHBvdGVudGlhbCBjaGFwdGVyIGhlYWRpbmdzYCk7XG5cbiAgbGV0IGNoYXB0ZXJzOiBDaGFwdGVyW10gPSBbXTtcbiAgaWYgKGhpdHMubGVuZ3RoID09PSAwKSB7XG4gICAgY2hhcHRlcnMgPSBbeyBpZDogMSwgdGl0bGU6IFwiRnVsbCBEb2N1bWVudFwiLCBzdGFydFBhZ2U6IDEsIGVuZFBhZ2U6IG51bVBhZ2VzIH1dO1xuICB9IGVsc2Uge1xuICAgIC8vIERlZHVwIHNpbWlsYXIgaGVhZGluZ3MgYW5kIGJ1aWxkIHJhbmdlc1xuICAgIGNvbnN0IHVuaXE6IEhpdFtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gaGl0c1tpXTtcbiAgICAgIGNvbnN0IHByZXYgPSB1bmlxW3VuaXEubGVuZ3RoIC0gMV07XG4gICAgICBcbiAgICAgIC8vIFNraXAgaWYgdGhpcyBpcyB0aGUgc2FtZSBoZWFkaW5nIG9uIGEgZGlmZmVyZW50IHBhZ2VcbiAgICAgIGlmIChwcmV2ICYmIGN1cnJlbnQudGl0bGUudG9Mb3dlckNhc2UoKSA9PT0gcHJldi50aXRsZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTa2lwIGlmIHRoaXMgaXMganVzdCBhIGNvbnRpbnVhdGlvbiBvZiB0aGUgc2FtZSBjaGFwdGVyXG4gICAgICBpZiAocHJldiAmJiBjdXJyZW50LnBhZ2UgLSBwcmV2LnBhZ2UgPCAzKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICB1bmlxLnB1c2goY3VycmVudCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBBZnRlciBkZWR1cGxpY2F0aW9uLCBmb3VuZCAke3VuaXEubGVuZ3RofSB1bmlxdWUgY2hhcHRlciBoZWFkaW5nc2ApO1xuICAgIFxuICAgIC8vIEJ1aWxkIGNoYXB0ZXIgcmFuZ2VzXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bmlxLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzdGFydCA9IHVuaXFbaV0ucGFnZTtcbiAgICAgIGNvbnN0IGVuZCA9IGkgKyAxIDwgdW5pcS5sZW5ndGggPyB1bmlxW2kgKyAxXS5wYWdlIC0gMSA6IG51bVBhZ2VzO1xuICAgICAgbGV0IHRpdGxlID0gdW5pcVtpXS50aXRsZTtcbiAgICAgIFxuICAgICAgLy8gTm9ybWFsaXplIGNoYXB0ZXIgdGl0bGVzXG4gICAgICBpZiAoL15cXHMqY2hhcHRlclxcYi9pLnRlc3QodGl0bGUpKSB7XG4gICAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvXlxccypjaGFwdGVyXFxzKi9pLCBcIlwiKS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCk7XG4gICAgICAgIHRpdGxlID0gYENoYXB0ZXIgJHt0aXRsZX1gO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjaGFwdGVycy5wdXNoKHsgaWQ6IGkgKyAxLCB0aXRsZSwgc3RhcnRQYWdlOiBzdGFydCwgZW5kUGFnZTogZW5kIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBQb3N0LXByb2Nlc3M6IGZpbHRlciB0byBvbmx5IG1haW4gbnVtYmVyZWQgY2hhcHRlcnMgKDEtMjIpIGFuZCBtZXJnZSBkdXBsaWNhdGVzXG4gICAgY29uc3QgY2hhcHRlck1hcCA9IG5ldyBNYXA8bnVtYmVyLCBDaGFwdGVyPigpO1xuICAgIFxuICAgIGNoYXB0ZXJzLmZvckVhY2goY2ggPT4ge1xuICAgICAgY29uc3QgY2hhcHRlck1hdGNoID0gY2gudGl0bGUubWF0Y2goL15DaGFwdGVyXFxzKyhcXGQrKS9pKTtcbiAgICAgIGlmICghY2hhcHRlck1hdGNoKSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IGNoYXB0ZXJOdW0gPSBwYXJzZUludChjaGFwdGVyTWF0Y2hbMV0pO1xuICAgICAgaWYgKGNoYXB0ZXJOdW0gPCAxIHx8IGNoYXB0ZXJOdW0gPiAyMikgcmV0dXJuO1xuICAgICAgXG4gICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgdGhpcyBjaGFwdGVyIG51bWJlciwgbWVyZ2UgdGhlbVxuICAgICAgaWYgKGNoYXB0ZXJNYXAuaGFzKGNoYXB0ZXJOdW0pKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gY2hhcHRlck1hcC5nZXQoY2hhcHRlck51bSkhO1xuICAgICAgICAvLyBVc2UgdGhlIGxvbmdlciB0aXRsZSBhbmQgbWVyZ2UgdGhlIHBhZ2UgcmFuZ2VzXG4gICAgICAgIGlmIChjaC50aXRsZS5sZW5ndGggPiBleGlzdGluZy50aXRsZS5sZW5ndGgpIHtcbiAgICAgICAgICBleGlzdGluZy50aXRsZSA9IGNoLnRpdGxlO1xuICAgICAgICB9XG4gICAgICAgIGV4aXN0aW5nLmVuZFBhZ2UgPSBNYXRoLm1heChleGlzdGluZy5lbmRQYWdlLCBjaC5lbmRQYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYXB0ZXJNYXAuc2V0KGNoYXB0ZXJOdW0sIHsgLi4uY2gsIGlkOiBjaGFwdGVyTnVtIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGlmIChjaGFwdGVyTWFwLnNpemUgPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgRmlsdGVyZWQgdG8gJHtjaGFwdGVyTWFwLnNpemV9IG1haW4gY2hhcHRlcnMgKDEtMjIpYCk7XG4gICAgICBjaGFwdGVycyA9IEFycmF5LmZyb20oY2hhcHRlck1hcC52YWx1ZXMoKSkuc29ydCgoYSwgYikgPT4gYS5pZCAtIGIuaWQpO1xuICAgICAgXG4gICAgICAvLyBSZWZpbmUgY2hhcHRlciBib3VuZGFyaWVzIHRvIGV4Y2x1ZGUgYXBwZW5kaXggY29udGVudFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFwdGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gY2hhcHRlcnNbaV07XG4gICAgICAgIGNvbnN0IG5leHQgPSBjaGFwdGVyc1tpICsgMV07XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB0aGlzIGNoYXB0ZXIgc3BhbnMgdG9vIG1hbnkgcGFnZXMsIGl0IG1pZ2h0IGluY2x1ZGUgYXBwZW5kaXggY29udGVudFxuICAgICAgICBpZiAoY3VycmVudC5lbmRQYWdlIC0gY3VycmVudC5zdGFydFBhZ2UgPiAxMDApIHtcbiAgICAgICAgICAvLyBMb29rIGZvciB0aGUgbmV4dCBjaGFwdGVyIHN0YXJ0IHRvIGdldCBhIGJldHRlciBib3VuZGFyeVxuICAgICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICBjdXJyZW50LmVuZFBhZ2UgPSBuZXh0LnN0YXJ0UGFnZSAtIDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciB0aGUgbGFzdCBjaGFwdGVyLCBsaW1pdCBpdCB0byBhIHJlYXNvbmFibGUgc2l6ZVxuICAgICAgICAgICAgY3VycmVudC5lbmRQYWdlID0gTWF0aC5taW4oY3VycmVudC5lbmRQYWdlLCBjdXJyZW50LnN0YXJ0UGFnZSArIDUwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY2hhcHRlcnM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHRyYWN0VGV4dEZvclJhbmdlKGJvb2tGaWxlTmFtZTogc3RyaW5nLCBzdGFydFBhZ2U6IG51bWJlciwgZW5kUGFnZTogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc29sZS5sb2coYEV4dHJhY3RpbmcgdGV4dCBmcm9tICR7Ym9va0ZpbGVOYW1lfSBwYWdlcyAke3N0YXJ0UGFnZX0tJHtlbmRQYWdlfWApO1xuICBjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShQREZfRElSLCBib29rRmlsZU5hbWUpO1xuICBjb25zb2xlLmxvZyhgRnVsbCBwYXRoOiAke2ZpbGVQYXRofWApO1xuXG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgZmlsZSBleGlzdHNcbiAgICBhd2FpdCBmcy5hY2Nlc3MoZmlsZVBhdGgpO1xuICAgIGNvbnNvbGUubG9nKGBGaWxlIGV4aXN0czogJHtmaWxlUGF0aH1gKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihgRmlsZSBkb2VzIG5vdCBleGlzdDogJHtmaWxlUGF0aH1gKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFBERiBmaWxlIG5vdCBmb3VuZDogJHtib29rRmlsZU5hbWV9YCk7XG4gIH1cblxuICBjb25zb2xlLmxvZyhgUmVhZGluZyBmaWxlOiAke2ZpbGVQYXRofWApO1xuICBjb25zdCBidWZmZXIgPSBhd2FpdCBmcy5yZWFkRmlsZShmaWxlUGF0aCk7XG4gIGNvbnNvbGUubG9nKGBGaWxlIHNpemU6ICR7YnVmZmVyLmxlbmd0aH0gYnl0ZXNgKTtcblxuICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgY29uc29sZS5sb2coYENyZWF0aW5nIFBERi5qcyBkb2N1bWVudGApO1xuICBjb25zdCBsb2FkaW5nVGFzayA9IHBkZmpzTGliLmdldERvY3VtZW50KHsgXG4gICAgZGF0YSwgXG4gICAgZGlzYWJsZVdvcmtlcjogdHJ1ZVxuICB9KTtcblxuICBjb25zb2xlLmxvZyhgV2FpdGluZyBmb3IgUERGIHRvIGxvYWRgKTtcbiAgY29uc3QgcGRmID0gYXdhaXQgbG9hZGluZ1Rhc2sucHJvbWlzZTtcbiAgY29uc29sZS5sb2coYFBERiBsb2FkZWQgd2l0aCAke3BkZi5udW1QYWdlc30gcGFnZXNgKTtcblxuICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgY29uc3QgcyA9IE1hdGgubWF4KDEsIHN0YXJ0UGFnZSk7XG4gIGNvbnN0IGUgPSBNYXRoLm1pbihlbmRQYWdlLCBwZGYubnVtUGFnZXMpO1xuICBjb25zb2xlLmxvZyhgRXh0cmFjdGluZyB0ZXh0IGZyb20gcGFnZXMgJHtzfSB0byAke2V9YCk7XG5cbiAgZm9yIChsZXQgaSA9IHM7IGkgPD0gZTsgaSsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHBhZ2UgJHtpfS8ke2V9YCk7XG4gICAgICBjb25zdCBwYWdlID0gYXdhaXQgcGRmLmdldFBhZ2UoaSk7XG4gICAgICBjb25zb2xlLmxvZyhgR2V0dGluZyB0ZXh0IGNvbnRlbnQgZm9yIHBhZ2UgJHtpfWApO1xuICAgICAgY29uc3QgdGMgPSBhd2FpdCBwYWdlLmdldFRleHRDb250ZW50KCk7XG4gICAgICBjb25zdCBpdGVtcyA9IHRjLml0ZW1zIGFzIEFycmF5PHsgc3RyOiBzdHJpbmcgfT47XG4gICAgICBjb25zdCBwYWdlVGV4dCA9IGl0ZW1zLm1hcCgoaXQpID0+IGl0LnN0cikuam9pbihcIlxcblwiKTtcbiAgICAgIGNvbnNvbGUubG9nKGBFeHRyYWN0ZWQgJHtwYWdlVGV4dC5sZW5ndGh9IGNoYXJhY3RlcnMgZnJvbSBwYWdlICR7aX1gKTtcbiAgICAgIHBhcnRzLnB1c2gocGFnZVRleHQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBwYWdlICR7aX06YCwgZXJyKTtcbiAgICAgIC8vIENvbnRpbnVlIHdpdGggbmV4dCBwYWdlXG4gICAgICBwYXJ0cy5wdXNoKGBbRXJyb3IgZXh0cmFjdGluZyB0ZXh0IGZyb20gcGFnZSAke2l9XWApO1xuICAgIH1cbiAgfVxuICBjb25zb2xlLmxvZyhgRmluaXNoZWQgZXh0cmFjdGluZyB0ZXh0IGZyb20gJHtlLXMrMX0gcGFnZXNgKTtcblxuICAvLyBCYXNpYyBjbGVhbnVwc1xuICBjb25zdCB0ZXh0ID0gcGFydHMuam9pbihcIlxcblxcblwiKVxuICAgIC5yZXBsYWNlKC9cXHUwMEEwL2csIFwiIFwiKVxuICAgIC5yZXBsYWNlKC9bIFxcdF0rXFxuL2csIFwiXFxuXCIpXG4gICAgLnJlcGxhY2UoL1xcbnszLH0vZywgXCJcXG5cXG5cIilcbiAgICAudHJpbSgpO1xuXG4gIHJldHVybiB0ZXh0O1xufVxuIl0sIm5hbWVzIjpbInBhdGgiLCJmcyIsInBkZmpzTGliIiwid29ya2VyUGF0aCIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiR2xvYmFsV29ya2VyT3B0aW9ucyIsIndvcmtlclNyYyIsIlBERl9ESVIiLCJyZXNvbHZlIiwibGlzdEJvb2tzIiwiY29uc29sZSIsImxvZyIsImFjY2VzcyIsImVyciIsImVycm9yIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJmaWxlcyIsInJlYWRkaXIiLCJwZGZGaWxlcyIsImZpbGUiLCJzdGF0IiwiaXNGaWxlIiwidG9Mb3dlckNhc2UiLCJlbmRzV2l0aCIsInB1c2giLCJsZW5ndGgiLCJDSEFQVEVSX1BBVFRFUk5TIiwibG9va3NMaWtlQ2hhcHRlckhlYWRpbmciLCJsaW5lIiwicyIsInRyaW0iLCJ0ZXN0IiwicGFydHMiLCJzcGxpdCIsIm1lYW5pbmdmdWxUZXh0Iiwic2xpY2UiLCJsb29rc0xpa2VBbGxDYXBzSGVhZGluZyIsImxldHRlcnMiLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJ3b3JkcyIsImhhc01lYW5pbmdmdWxXb3JkcyIsInNvbWUiLCJ3b3JkIiwiZXh0cmFjdENoYXB0ZXJzIiwiYm9va0ZpbGVOYW1lIiwiZmlsZVBhdGgiLCJFcnJvciIsImJ1ZmZlciIsInJlYWRGaWxlIiwiZGF0YSIsIlVpbnQ4QXJyYXkiLCJsb2FkaW5nVGFzayIsImdldERvY3VtZW50IiwiZGlzYWJsZVdvcmtlciIsInBkZiIsInByb21pc2UiLCJudW1QYWdlcyIsImhpdHMiLCJpIiwicGFnZSIsImdldFBhZ2UiLCJ0YyIsImdldFRleHRDb250ZW50IiwiaXRlbXMiLCJyYXciLCJtYXAiLCJpdCIsInN0ciIsImxpbmVzIiwibCIsImZpbHRlciIsIkJvb2xlYW4iLCJmb3VuZCIsImZpbmQiLCJsbiIsInJlIiwidGl0bGUiLCJjaGFwdGVycyIsImlkIiwic3RhcnRQYWdlIiwiZW5kUGFnZSIsInVuaXEiLCJjdXJyZW50IiwicHJldiIsInN0YXJ0IiwiZW5kIiwiY2hhcHRlck1hcCIsIk1hcCIsImZvckVhY2giLCJjaCIsImNoYXB0ZXJNYXRjaCIsIm1hdGNoIiwiY2hhcHRlck51bSIsInBhcnNlSW50IiwiaGFzIiwiZXhpc3RpbmciLCJnZXQiLCJNYXRoIiwibWF4Iiwic2V0Iiwic2l6ZSIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsInNvcnQiLCJhIiwiYiIsIm5leHQiLCJtaW4iLCJleHRyYWN0VGV4dEZvclJhbmdlIiwiZSIsInBhZ2VUZXh0IiwidGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/pdf.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/pdfjs-dist"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute&page=%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapter%2Froute.ts&appDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();