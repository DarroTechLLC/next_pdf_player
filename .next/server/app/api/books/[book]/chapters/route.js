"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/books/[book]/chapters/route";
exports.ids = ["app/api/books/[book]/chapters/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:fs/promises":
/*!***********************************!*\
  !*** external "node:fs/promises" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("node:fs/promises");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute&page=%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute.ts&appDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute&page=%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute.ts&appDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_anthonymiller_workspaces_next_book_reader_app_api_books_book_chapters_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/books/[book]/chapters/route.ts */ \"(rsc)/./app/api/books/[book]/chapters/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/books/[book]/chapters/route\",\n        pathname: \"/api/books/[book]/chapters\",\n        filename: \"route\",\n        bundlePath: \"app/api/books/[book]/chapters/route\"\n    },\n    resolvedPagePath: \"/Users/anthonymiller/workspaces/next_book_reader/app/api/books/[book]/chapters/route.ts\",\n    nextConfigOutput,\n    userland: _Users_anthonymiller_workspaces_next_book_reader_app_api_books_book_chapters_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/books/[book]/chapters/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZib29rcyUyRiU1QmJvb2slNUQlMkZjaGFwdGVycyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYm9va3MlMkYlNUJib29rJTVEJTJGY2hhcHRlcnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZib29rcyUyRiU1QmJvb2slNUQlMkZjaGFwdGVycyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFudGhvbnltaWxsZXIlMkZ3b3Jrc3BhY2VzJTJGbmV4dF9ib29rX3JlYWRlciUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhbnRob255bWlsbGVyJTJGd29ya3NwYWNlcyUyRm5leHRfYm9va19yZWFkZXImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3VDO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGRmLXR0cy1uZXh0Lz9iMmE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9hbnRob255bWlsbGVyL3dvcmtzcGFjZXMvbmV4dF9ib29rX3JlYWRlci9hcHAvYXBpL2Jvb2tzL1tib29rXS9jaGFwdGVycy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYm9va3MvW2Jvb2tdL2NoYXB0ZXJzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYm9va3MvW2Jvb2tdL2NoYXB0ZXJzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9ib29rcy9bYm9va10vY2hhcHRlcnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYW50aG9ueW1pbGxlci93b3Jrc3BhY2VzL25leHRfYm9va19yZWFkZXIvYXBwL2FwaS9ib29rcy9bYm9va10vY2hhcHRlcnMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2Jvb2tzL1tib29rXS9jaGFwdGVycy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute&page=%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute.ts&appDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/books/[book]/chapters/route.ts":
/*!************************************************!*\
  !*** ./app/api/books/[book]/chapters/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_pdf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/pdf */ \"(rsc)/./lib/pdf.ts\");\n\n\nasync function GET(_req, { params }) {\n    console.log(`API: Fetching chapters for book: ${params.book}`);\n    try {\n        console.log(`API: Calling extractChapters for ${params.book}`);\n        const chapters = await (0,_lib_pdf__WEBPACK_IMPORTED_MODULE_1__.extractChapters)(params.book);\n        console.log(`API: Found ${chapters.length} chapters`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            chapters\n        });\n    } catch (error) {\n        console.error(\"Error extracting chapters:\", error);\n        // Include more detailed error information in the response\n        const errorMessage = error instanceof Error ? error.message : String(error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            chapters: [],\n            error: \"Failed to extract chapters\",\n            details: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2Jvb2tzL1tib29rXS9jaGFwdGVycy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDQztBQUVyQyxlQUFlRSxJQUNwQkMsSUFBYSxFQUNiLEVBQUVDLE1BQU0sRUFBZ0M7SUFFeENDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGlDQUFpQyxFQUFFRixPQUFPRyxJQUFJLENBQUMsQ0FBQztJQUM3RCxJQUFJO1FBQ0ZGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGlDQUFpQyxFQUFFRixPQUFPRyxJQUFJLENBQUMsQ0FBQztRQUM3RCxNQUFNQyxXQUFXLE1BQU1QLHlEQUFlQSxDQUFDRyxPQUFPRyxJQUFJO1FBQ2xERixRQUFRQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUVFLFNBQVNDLE1BQU0sQ0FBQyxTQUFTLENBQUM7UUFDcEQsT0FBT1QscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFRjtRQUFTO0lBQ3RDLEVBQUUsT0FBT0csT0FBTztRQUNkTixRQUFRTSxLQUFLLENBQUMsOEJBQThCQTtRQUM1QywwREFBMEQ7UUFDMUQsTUFBTUMsZUFBZUQsaUJBQWlCRSxRQUFRRixNQUFNRyxPQUFPLEdBQUdDLE9BQU9KO1FBQ3JFLE9BQU9YLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFDdkJGLFVBQVUsRUFBRTtZQUNaRyxPQUFPO1lBQ1BLLFNBQVNKO1FBQ1gsR0FBRztZQUFFSyxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BkZi10dHMtbmV4dC8uL2FwcC9hcGkvYm9va3MvW2Jvb2tdL2NoYXB0ZXJzL3JvdXRlLnRzPzA1YWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBleHRyYWN0Q2hhcHRlcnMgfSBmcm9tIFwiQC9saWIvcGRmXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoXG4gIF9yZXE6IFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGJvb2s6IHN0cmluZyB9IH1cbikge1xuICBjb25zb2xlLmxvZyhgQVBJOiBGZXRjaGluZyBjaGFwdGVycyBmb3IgYm9vazogJHtwYXJhbXMuYm9va31gKTtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgQVBJOiBDYWxsaW5nIGV4dHJhY3RDaGFwdGVycyBmb3IgJHtwYXJhbXMuYm9va31gKTtcbiAgICBjb25zdCBjaGFwdGVycyA9IGF3YWl0IGV4dHJhY3RDaGFwdGVycyhwYXJhbXMuYm9vayk7XG4gICAgY29uc29sZS5sb2coYEFQSTogRm91bmQgJHtjaGFwdGVycy5sZW5ndGh9IGNoYXB0ZXJzYCk7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgY2hhcHRlcnMgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGV4dHJhY3RpbmcgY2hhcHRlcnM6XCIsIGVycm9yKTtcbiAgICAvLyBJbmNsdWRlIG1vcmUgZGV0YWlsZWQgZXJyb3IgaW5mb3JtYXRpb24gaW4gdGhlIHJlc3BvbnNlXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgY2hhcHRlcnM6IFtdLCBcbiAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBleHRyYWN0IGNoYXB0ZXJzXCIsIFxuICAgICAgZGV0YWlsczogZXJyb3JNZXNzYWdlIFxuICAgIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJleHRyYWN0Q2hhcHRlcnMiLCJHRVQiLCJfcmVxIiwicGFyYW1zIiwiY29uc29sZSIsImxvZyIsImJvb2siLCJjaGFwdGVycyIsImxlbmd0aCIsImpzb24iLCJlcnJvciIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwibWVzc2FnZSIsIlN0cmluZyIsImRldGFpbHMiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/books/[book]/chapters/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/pdf.ts":
/*!********************!*\
  !*** ./lib/pdf.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PDF_DIR: () => (/* binding */ PDF_DIR),\n/* harmony export */   extractChapters: () => (/* binding */ extractChapters),\n/* harmony export */   extractTextForRange: () => (/* binding */ extractTextForRange),\n/* harmony export */   listBooks: () => (/* binding */ listBooks)\n/* harmony export */ });\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:path */ \"node:path\");\n/* harmony import */ var node_path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(node_path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node:fs/promises */ \"node:fs/promises\");\n/* harmony import */ var node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var pdfjs_dist_legacy_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pdfjs-dist/legacy/build/pdf.mjs */ \"(rsc)/./node_modules/pdfjs-dist/legacy/build/pdf.mjs\");\n\n\n// Use legacy build for Node.js environment\n\n// Configure PDF.js for Node environment\n// Try to use a path-based approach for the worker\nconst workerPath = node_path__WEBPACK_IMPORTED_MODULE_0___default().join(process.cwd(), \"node_modules\", \"pdfjs-dist\", \"build\", \"pdf.worker.mjs\");\npdfjs_dist_legacy_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_2__.GlobalWorkerOptions.workerSrc = workerPath;\n// Use path.resolve to ensure we get an absolute path\nconst PDF_DIR = node_path__WEBPACK_IMPORTED_MODULE_0___default().resolve(process.cwd(), \"public\", \"pdfs\");\n// Text cleaning and formatting function\nfunction cleanAndFormatText(rawText) {\n    // Split text into lines for processing\n    const lines = rawText.split(\"\\n\");\n    const blocks = [];\n    let currentBlock = null;\n    // Process each line\n    for(let i = 0; i < lines.length; i++){\n        const line = lines[i].trim();\n        // Skip empty lines and page numbers/headers\n        if (!line || isPageNumber(line) || isPageHeader(line)) {\n            continue;\n        }\n        // Detect block type\n        if (isChapterHeading(line)) {\n            if (currentBlock) blocks.push(currentBlock);\n            currentBlock = {\n                type: \"heading\",\n                content: formatHeading(line)\n            };\n            blocks.push(currentBlock);\n            currentBlock = null;\n        } else if (isBulletPoint(line)) {\n            if (currentBlock?.type !== \"list\") {\n                if (currentBlock) blocks.push(currentBlock);\n                currentBlock = {\n                    type: \"list\",\n                    content: formatListItem(line)\n                };\n            } else {\n                currentBlock.content += \"\\n\" + formatListItem(line);\n            }\n        } else if (isQuote(line)) {\n            if (currentBlock) blocks.push(currentBlock);\n            currentBlock = {\n                type: \"quote\",\n                content: formatQuote(line)\n            };\n            blocks.push(currentBlock);\n            currentBlock = null;\n        } else if (isSidebar(line)) {\n            if (currentBlock) blocks.push(currentBlock);\n            currentBlock = {\n                type: \"sidebar\",\n                content: formatSidebar(line, lines, i)\n            };\n            // Skip the lines that were included in the sidebar\n            i += countSidebarLines(lines, i);\n            blocks.push(currentBlock);\n            currentBlock = null;\n        } else {\n            // Regular paragraph text\n            if (!currentBlock || currentBlock.type !== \"paragraph\") {\n                if (currentBlock) blocks.push(currentBlock);\n                currentBlock = {\n                    type: \"paragraph\",\n                    content: formatParagraph(line)\n                };\n            } else {\n                // If this line looks like it continues the paragraph, append it\n                if (shouldAppendToParagraph(line, currentBlock.content)) {\n                    currentBlock.content += \" \" + formatParagraph(line);\n                } else {\n                    blocks.push(currentBlock);\n                    currentBlock = {\n                        type: \"paragraph\",\n                        content: formatParagraph(line)\n                    };\n                }\n            }\n        }\n    }\n    // Add the last block if there is one\n    if (currentBlock) blocks.push(currentBlock);\n    // Convert blocks to formatted text\n    return blocks.map((block)=>{\n        switch(block.type){\n            case \"heading\":\n                return block.content;\n            case \"list\":\n                return block.content;\n            case \"quote\":\n                return \"> \" + block.content;\n            case \"sidebar\":\n                return \"---\\n\" + block.content + \"\\n---\";\n            case \"paragraph\":\n            default:\n                return block.content;\n        }\n    }).join(\"\\n\\n\");\n}\n// Helper functions\nfunction isPageNumber(line) {\n    return /^\\d+$/.test(line.trim());\n}\nfunction isPageHeader(line) {\n    return /^(Entrepreneurship Bootcamp|Defy Ventures)/i.test(line.trim());\n}\nfunction isChapterHeading(line) {\n    return /^Chapter\\s+\\d+/i.test(line.trim()) || /^[A-Z][A-Z\\s]{10,}/.test(line.trim());\n}\nfunction isBulletPoint(line) {\n    return /^[•·▪▫◦‣⁃]\\s/.test(line.trim());\n}\nfunction isQuote(line) {\n    return /^[\"\"]/.test(line.trim()) || /^z\\s/.test(line.trim());\n}\nfunction isSidebar(line) {\n    return /^(Note:|Tip:|Important:)/.test(line.trim());\n}\nfunction formatHeading(line) {\n    const level = getHeadingLevel(line);\n    const text = line.replace(/^Chapter\\s+(\\d+):\\s*/i, \"Chapter $1: \").replace(/\\s+/g, \" \").trim();\n    return \"#\".repeat(level) + \" \" + text;\n}\nfunction getHeadingLevel(line) {\n    if (/^Chapter\\s+\\d+/i.test(line)) return 1;\n    if (/^Section/i.test(line)) return 2;\n    if (/^\\d+\\./i.test(line)) return 3;\n    return 2; // Default for other headings\n}\nfunction formatListItem(line) {\n    return \"• \" + line.replace(/^[•·▪▫◦‣⁃]\\s*/, \"\").trim();\n}\nfunction formatQuote(line) {\n    return line.replace(/^[\"\"]/, \"\").replace(/^z\\s/, \"\").trim();\n}\nfunction formatSidebar(line, lines, currentIndex) {\n    // Extract the sidebar content\n    let content = line.trim();\n    let i = currentIndex + 1;\n    while(i < lines.length && !isEmptyOrSeparator(lines[i])){\n        content += \"\\n\" + lines[i].trim();\n        i++;\n    }\n    return content;\n}\nfunction countSidebarLines(lines, startIndex) {\n    let count = 0;\n    let i = startIndex + 1;\n    while(i < lines.length && !isEmptyOrSeparator(lines[i])){\n        count++;\n        i++;\n    }\n    return count;\n}\nfunction isEmptyOrSeparator(line) {\n    return !line.trim() || /^-{3,}$/.test(line.trim());\n}\nfunction formatParagraph(line) {\n    return line.replace(/\\s+/g, \" \").trim();\n}\nfunction shouldAppendToParagraph(line, currentContent) {\n    // Check if this line looks like it continues the paragraph\n    // For example, if it doesn't start with a capital letter, it might be a continuation\n    return !isChapterHeading(line) && !isBulletPoint(line) && !isQuote(line) && !isSidebar(line) && !/^[A-Z]/.test(line.trim()) && currentContent.length > 0;\n}\nasync function listBooks() {\n    try {\n        console.log(`Reading directory: ${PDF_DIR}`);\n        // First check if the directory exists\n        try {\n            await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().access(PDF_DIR);\n        } catch (err) {\n            console.error(`Directory ${PDF_DIR} does not exist or is not accessible`);\n            // Create the directory if it doesn't exist\n            await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().mkdir(PDF_DIR, {\n                recursive: true\n            });\n            return []; // Return empty array since we just created the directory\n        }\n        // Read all files in the directory\n        const files = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readdir(PDF_DIR);\n        // Filter for PDF files\n        const pdfFiles = [];\n        for (const file of files){\n            try {\n                const stat = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().stat(node_path__WEBPACK_IMPORTED_MODULE_0___default().join(PDF_DIR, file));\n                if (stat.isFile() && file.toLowerCase().endsWith(\".pdf\")) {\n                    pdfFiles.push(file);\n                }\n            } catch (err) {\n                console.error(`Error checking file ${file}:`, err);\n            // Continue with other files\n            }\n        }\n        console.log(`Found ${pdfFiles.length} PDF files`);\n        return pdfFiles;\n    } catch (error) {\n        console.error(`Error reading directory ${PDF_DIR}:`, error);\n        throw error;\n    }\n}\nconst CHAPTER_PATTERNS = [\n    /^\\s*chapter\\s+\\d+\\s*:/i,\n    /^\\s*chapter\\s+\\d+\\s*[a-zA-Z]/i,\n    /^\\s*chapter\\s+[ivxlcdm]+\\s*:/i,\n    /^\\s*chapter\\s+[ivxlcdm]+\\s*[a-zA-Z]/i,\n    /^\\s*ch\\.\\s*\\d+\\s*:/i,\n    /^\\s*ch\\.\\s*\\d+\\s*[a-zA-Z]/i,\n    /^\\s*book\\s+\\d+\\s*:/i,\n    /^\\s*book\\s+\\d+\\s*[a-zA-Z]/i,\n    /^\\s*part\\s+\\d+\\s*:/i,\n    /^\\s*part\\s+\\d+\\s*[a-zA-Z]/i\n];\nfunction looksLikeChapterHeading(line) {\n    const s = line.trim();\n    if (s.length === 0 || s.length > 80) return false;\n    // Must start with \"Chapter\" or similar\n    if (!/^(chapter|ch\\.|book|part)\\s+/i.test(s)) return false;\n    // Must contain a number or roman numeral\n    if (!/\\d+|[ivxlcdm]+/i.test(s)) return false;\n    // Must have some descriptive text after the number\n    const parts = s.split(/\\s+/);\n    if (parts.length < 3) return false;\n    // Check if there's meaningful text after the chapter identifier\n    const meaningfulText = parts.slice(2).join(\" \");\n    if (meaningfulText.length < 3) return false;\n    // Exclude appendix sections, rubrics, etc.\n    if (/rubric|appendix|case study|promise cards/i.test(meaningfulText)) return false;\n    return true;\n}\nfunction looksLikeAllCapsHeading(line) {\n    const s = line.trim();\n    if (s.length === 0 || s.length > 60) return false;\n    // Must be reasonably long to be a heading\n    if (s.length < 10) return false;\n    const letters = s.replace(/[^A-Za-z]/g, \"\");\n    if (letters.length < 5) return false; // Require more letters\n    // Must be all caps\n    if (s !== s.toUpperCase()) return false;\n    // Must not be just repeated characters or very short words\n    const words = s.split(/\\s+/);\n    if (words.length < 2) return false;\n    // Check if it looks like a meaningful heading (not just random caps)\n    const hasMeaningfulWords = words.some((word)=>word.length > 2);\n    if (!hasMeaningfulWords) return false;\n    // Exclude appendix sections, rubrics, etc.\n    if (/rubric|appendix|case study|promise cards/i.test(s)) return false;\n    return true;\n}\nasync function extractChapters(bookFileName) {\n    console.log(`Extracting chapters from ${bookFileName}`);\n    const filePath = node_path__WEBPACK_IMPORTED_MODULE_0___default().resolve(PDF_DIR, bookFileName);\n    console.log(`Full path: ${filePath}`);\n    try {\n        // Check if file exists\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().access(filePath);\n        console.log(`File exists: ${filePath}`);\n    } catch (err) {\n        console.error(`File does not exist: ${filePath}`);\n        throw new Error(`PDF file not found: ${bookFileName}`);\n    }\n    console.log(`Reading file: ${filePath}`);\n    const buffer = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(filePath);\n    console.log(`File size: ${buffer.length} bytes`);\n    const data = new Uint8Array(buffer);\n    console.log(`Creating PDF.js document`);\n    const loadingTask = pdfjs_dist_legacy_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_2__.getDocument({\n        data,\n        disableWorker: true\n    });\n    console.log(`Waiting for PDF to load`);\n    const pdf = await loadingTask.promise;\n    const numPages = pdf.numPages;\n    console.log(`PDF loaded with ${numPages} pages`);\n    const hits = [];\n    // Scan first ~50 lines per page for heading candidates\n    console.log(`Starting to scan ${numPages} pages for chapter headings`);\n    for(let i = 1; i <= numPages; i++){\n        try {\n            console.log(`Processing page ${i}/${numPages}`);\n            const page = await pdf.getPage(i);\n            console.log(`Getting text content for page ${i}`);\n            const tc = await page.getTextContent();\n            // Join into lines\n            const items = tc.items;\n            const raw = items.map((it)=>it.str).join(\"\\n\");\n            const lines = raw.split(/\\r?\\n/).map((l)=>l.trim()).filter(Boolean).slice(0, 60);\n            console.log(`Found ${lines.length} lines of text on page ${i}`);\n            const found = lines.find((ln)=>CHAPTER_PATTERNS.some((re)=>re.test(ln)) || looksLikeChapterHeading(ln) || looksLikeAllCapsHeading(ln));\n            if (found) {\n                console.log(`Found chapter heading on page ${i}: \"${found}\"`);\n                hits.push({\n                    page: i,\n                    title: found.replace(/\\s+/g, \" \").trim()\n                });\n            }\n        } catch (err) {\n            console.error(`Error processing page ${i}:`, err);\n        // Continue with next page\n        }\n    }\n    console.log(`Finished scanning pages, found ${hits.length} potential chapter headings`);\n    let chapters = [];\n    if (hits.length === 0) {\n        chapters = [\n            {\n                id: 1,\n                title: \"Full Document\",\n                startPage: 1,\n                endPage: numPages\n            }\n        ];\n    } else {\n        // Dedup similar headings and build ranges\n        const uniq = [];\n        for(let i = 0; i < hits.length; i++){\n            const current = hits[i];\n            const prev = uniq[uniq.length - 1];\n            // Skip if this is the same heading on a different page\n            if (prev && current.title.toLowerCase() === prev.title.toLowerCase()) {\n                continue;\n            }\n            // Skip if this is just a continuation of the same chapter\n            if (prev && current.page - prev.page < 3) {\n                continue;\n            }\n            uniq.push(current);\n        }\n        console.log(`After deduplication, found ${uniq.length} unique chapter headings`);\n        // Build chapter ranges\n        for(let i = 0; i < uniq.length; i++){\n            const start = uniq[i].page;\n            const end = i + 1 < uniq.length ? uniq[i + 1].page - 1 : numPages;\n            let title = uniq[i].title;\n            // Normalize chapter titles\n            if (/^\\s*chapter\\b/i.test(title)) {\n                title = title.replace(/^\\s*chapter\\s*/i, \"\").replace(/\\s+/g, \" \").trim();\n                title = `Chapter ${title}`;\n            }\n            chapters.push({\n                id: i + 1,\n                title,\n                startPage: start,\n                endPage: end\n            });\n        }\n        // Post-process: filter to only main numbered chapters (1-22) and merge duplicates\n        const chapterMap = new Map();\n        chapters.forEach((ch)=>{\n            const chapterMatch = ch.title.match(/^Chapter\\s+(\\d+)/i);\n            if (!chapterMatch) return;\n            const chapterNum = parseInt(chapterMatch[1]);\n            if (chapterNum < 1 || chapterNum > 22) return;\n            // If we already have this chapter number, merge them\n            if (chapterMap.has(chapterNum)) {\n                const existing = chapterMap.get(chapterNum);\n                // Use the longer title and merge the page ranges\n                if (ch.title.length > existing.title.length) {\n                    existing.title = ch.title;\n                }\n                existing.endPage = Math.max(existing.endPage, ch.endPage);\n            } else {\n                chapterMap.set(chapterNum, {\n                    ...ch,\n                    id: chapterNum\n                });\n            }\n        });\n        if (chapterMap.size > 0) {\n            console.log(`Filtered to ${chapterMap.size} main chapters (1-22)`);\n            chapters = Array.from(chapterMap.values()).sort((a, b)=>a.id - b.id);\n            // Refine chapter boundaries to exclude appendix content\n            for(let i = 0; i < chapters.length; i++){\n                const current = chapters[i];\n                const next = chapters[i + 1];\n                // If this chapter spans too many pages, it might include appendix content\n                if (current.endPage - current.startPage > 100) {\n                    // Look for the next chapter start to get a better boundary\n                    if (next) {\n                        current.endPage = next.startPage - 1;\n                    } else {\n                        // For the last chapter, limit it to a reasonable size\n                        current.endPage = Math.min(current.endPage, current.startPage + 50);\n                    }\n                }\n            }\n        }\n    }\n    return chapters;\n}\nasync function extractTextForRange(bookFileName, startPage, endPage) {\n    console.log(`Extracting text from ${bookFileName} pages ${startPage}-${endPage}`);\n    const filePath = node_path__WEBPACK_IMPORTED_MODULE_0___default().resolve(PDF_DIR, bookFileName);\n    console.log(`Full path: ${filePath}`);\n    try {\n        // Check if file exists\n        await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().access(filePath);\n        console.log(`File exists: ${filePath}`);\n    } catch (err) {\n        console.error(`File does not exist: ${filePath}`);\n        throw new Error(`PDF file not found: ${bookFileName}`);\n    }\n    console.log(`Reading file: ${filePath}`);\n    const buffer = await node_fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(filePath);\n    console.log(`File size: ${buffer.length} bytes`);\n    const data = new Uint8Array(buffer);\n    console.log(`Creating PDF.js document`);\n    const loadingTask = pdfjs_dist_legacy_build_pdf_mjs__WEBPACK_IMPORTED_MODULE_2__.getDocument({\n        data,\n        disableWorker: true\n    });\n    console.log(`Waiting for PDF to load`);\n    const pdf = await loadingTask.promise;\n    console.log(`PDF loaded with ${pdf.numPages} pages`);\n    const parts = [];\n    const s = Math.max(1, startPage);\n    const e = Math.min(endPage, pdf.numPages);\n    console.log(`Extracting text from pages ${s} to ${e}`);\n    for(let i = s; i <= e; i++){\n        try {\n            console.log(`Processing page ${i}/${e}`);\n            const page = await pdf.getPage(i);\n            console.log(`Getting text content for page ${i}`);\n            const tc = await page.getTextContent();\n            const items = tc.items;\n            const pageText = items.map((it)=>it.str).join(\"\\n\");\n            console.log(`Extracted ${pageText.length} characters from page ${i}`);\n            parts.push(pageText);\n        } catch (err) {\n            console.error(`Error processing page ${i}:`, err);\n            // Continue with next page\n            parts.push(`[Error extracting text from page ${i}]`);\n        }\n    }\n    console.log(`Finished extracting text from ${e - s + 1} pages`);\n    // Join parts and do basic cleanup\n    const text = parts.join(\"\\n\\n\").replace(/\\u00A0/g, \" \").replace(/[ \\t]+\\n/g, \"\\n\").replace(/\\n{3,}/g, \"\\n\\n\").trim();\n    // Apply advanced text cleaning and formatting\n    return cleanAndFormatText(text);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBR0MsR0FBRyxFQUFFakcsSUFBSSxDQUFDO1lBQ2hEK0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsVUFBVSxFQUFFNEYsU0FBUzlILE1BQU0sQ0FBQyxzQkFBc0IsRUFBRUQsRUFBRSxDQUFDO1lBQ3BFb0QsTUFBTTdDLElBQUksQ0FBQ3dIO1FBQ2IsRUFBRSxPQUFPMUYsS0FBSztZQUNaSCxRQUFRSSxLQUFLLENBQUMsQ0FBQyxzQkFBc0IsRUFBRXRDLEVBQUUsQ0FBQyxDQUFDLEVBQUVxQztZQUM3QywwQkFBMEI7WUFDMUJlLE1BQU03QyxJQUFJLENBQUMsQ0FBQyxpQ0FBaUMsRUFBRVAsRUFBRSxDQUFDLENBQUM7UUFDckQ7SUFDRjtJQUNBa0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsOEJBQThCLEVBQUUyRixJQUFFM0UsSUFBRSxFQUFFLE1BQU0sQ0FBQztJQUUxRCxrQ0FBa0M7SUFDbEMsTUFBTTFCLE9BQU8yQixNQUFNakUsSUFBSSxDQUFDLFFBQ3JCdUMsT0FBTyxDQUFDLFdBQVcsS0FDbkJBLE9BQU8sQ0FBQyxhQUFhLE1BQ3JCQSxPQUFPLENBQUMsV0FBVyxRQUNuQnZCLElBQUk7SUFFUCw4Q0FBOEM7SUFDOUMsT0FBT1QsbUJBQW1CK0I7QUFDNUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wZGYtdHRzLW5leHQvLi9saWIvcGRmLnRzPzIyMTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSBcIm5vZGU6cGF0aFwiO1xuaW1wb3J0IGZzIGZyb20gXCJub2RlOmZzL3Byb21pc2VzXCI7XG5pbXBvcnQgbmF0dXJhbCBmcm9tICduYXR1cmFsJztcblxuLy8gVXNlIGxlZ2FjeSBidWlsZCBmb3IgTm9kZS5qcyBlbnZpcm9ubWVudFxuaW1wb3J0ICogYXMgcGRmanNMaWIgZnJvbSBcInBkZmpzLWRpc3QvbGVnYWN5L2J1aWxkL3BkZi5tanNcIjtcblxuLy8gQ29uZmlndXJlIFBERi5qcyBmb3IgTm9kZSBlbnZpcm9ubWVudFxuLy8gVHJ5IHRvIHVzZSBhIHBhdGgtYmFzZWQgYXBwcm9hY2ggZm9yIHRoZSB3b3JrZXJcbmNvbnN0IHdvcmtlclBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ25vZGVfbW9kdWxlcycsICdwZGZqcy1kaXN0JywgJ2J1aWxkJywgJ3BkZi53b3JrZXIubWpzJyk7XG5wZGZqc0xpYi5HbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclNyYyA9IHdvcmtlclBhdGg7XG5cbi8vIFVzZSBwYXRoLnJlc29sdmUgdG8gZW5zdXJlIHdlIGdldCBhbiBhYnNvbHV0ZSBwYXRoXG5leHBvcnQgY29uc3QgUERGX0RJUiA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCBcInB1YmxpY1wiLCBcInBkZnNcIik7XG5cbi8vIFRleHQgY2xlYW5pbmcgYW5kIGZvcm1hdHRpbmcgZnVuY3Rpb25cbmZ1bmN0aW9uIGNsZWFuQW5kRm9ybWF0VGV4dChyYXdUZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyBTcGxpdCB0ZXh0IGludG8gbGluZXMgZm9yIHByb2Nlc3NpbmdcbiAgY29uc3QgbGluZXMgPSByYXdUZXh0LnNwbGl0KCdcXG4nKTtcbiAgY29uc3QgYmxvY2tzOiB7IHR5cGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH1bXSA9IFtdO1xuICBsZXQgY3VycmVudEJsb2NrOiB7IHR5cGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH0gfCBudWxsID0gbnVsbDtcblxuICAvLyBQcm9jZXNzIGVhY2ggbGluZVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcblxuICAgIC8vIFNraXAgZW1wdHkgbGluZXMgYW5kIHBhZ2UgbnVtYmVycy9oZWFkZXJzXG4gICAgaWYgKCFsaW5lIHx8IGlzUGFnZU51bWJlcihsaW5lKSB8fCBpc1BhZ2VIZWFkZXIobGluZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIERldGVjdCBibG9jayB0eXBlXG4gICAgaWYgKGlzQ2hhcHRlckhlYWRpbmcobGluZSkpIHtcbiAgICAgIGlmIChjdXJyZW50QmxvY2spIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICBjdXJyZW50QmxvY2sgPSB7IHR5cGU6ICdoZWFkaW5nJywgY29udGVudDogZm9ybWF0SGVhZGluZyhsaW5lKSB9O1xuICAgICAgYmxvY2tzLnB1c2goY3VycmVudEJsb2NrKTtcbiAgICAgIGN1cnJlbnRCbG9jayA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChpc0J1bGxldFBvaW50KGxpbmUpKSB7XG4gICAgICBpZiAoY3VycmVudEJsb2NrPy50eXBlICE9PSAnbGlzdCcpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRCbG9jaykgYmxvY2tzLnB1c2goY3VycmVudEJsb2NrKTtcbiAgICAgICAgY3VycmVudEJsb2NrID0geyB0eXBlOiAnbGlzdCcsIGNvbnRlbnQ6IGZvcm1hdExpc3RJdGVtKGxpbmUpIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50QmxvY2suY29udGVudCArPSAnXFxuJyArIGZvcm1hdExpc3RJdGVtKGxpbmUpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNRdW90ZShsaW5lKSkge1xuICAgICAgaWYgKGN1cnJlbnRCbG9jaykgYmxvY2tzLnB1c2goY3VycmVudEJsb2NrKTtcbiAgICAgIGN1cnJlbnRCbG9jayA9IHsgdHlwZTogJ3F1b3RlJywgY29udGVudDogZm9ybWF0UXVvdGUobGluZSkgfTtcbiAgICAgIGJsb2Nrcy5wdXNoKGN1cnJlbnRCbG9jayk7XG4gICAgICBjdXJyZW50QmxvY2sgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAoaXNTaWRlYmFyKGxpbmUpKSB7XG4gICAgICBpZiAoY3VycmVudEJsb2NrKSBibG9ja3MucHVzaChjdXJyZW50QmxvY2spO1xuICAgICAgY3VycmVudEJsb2NrID0geyB0eXBlOiAnc2lkZWJhcicsIGNvbnRlbnQ6IGZvcm1hdFNpZGViYXIobGluZSwgbGluZXMsIGkpIH07XG4gICAgICAvLyBTa2lwIHRoZSBsaW5lcyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhlIHNpZGViYXJcbiAgICAgIGkgKz0gY291bnRTaWRlYmFyTGluZXMobGluZXMsIGkpO1xuICAgICAgYmxvY2tzLnB1c2goY3VycmVudEJsb2NrKTtcbiAgICAgIGN1cnJlbnRCbG9jayA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlZ3VsYXIgcGFyYWdyYXBoIHRleHRcbiAgICAgIGlmICghY3VycmVudEJsb2NrIHx8IGN1cnJlbnRCbG9jay50eXBlICE9PSAncGFyYWdyYXBoJykge1xuICAgICAgICBpZiAoY3VycmVudEJsb2NrKSBibG9ja3MucHVzaChjdXJyZW50QmxvY2spO1xuICAgICAgICBjdXJyZW50QmxvY2sgPSB7IHR5cGU6ICdwYXJhZ3JhcGgnLCBjb250ZW50OiBmb3JtYXRQYXJhZ3JhcGgobGluZSkgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIHRoaXMgbGluZSBsb29rcyBsaWtlIGl0IGNvbnRpbnVlcyB0aGUgcGFyYWdyYXBoLCBhcHBlbmQgaXRcbiAgICAgICAgaWYgKHNob3VsZEFwcGVuZFRvUGFyYWdyYXBoKGxpbmUsIGN1cnJlbnRCbG9jay5jb250ZW50KSkge1xuICAgICAgICAgIGN1cnJlbnRCbG9jay5jb250ZW50ICs9ICcgJyArIGZvcm1hdFBhcmFncmFwaChsaW5lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBibG9ja3MucHVzaChjdXJyZW50QmxvY2spO1xuICAgICAgICAgIGN1cnJlbnRCbG9jayA9IHsgdHlwZTogJ3BhcmFncmFwaCcsIGNvbnRlbnQ6IGZvcm1hdFBhcmFncmFwaChsaW5lKSB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIHRoZSBsYXN0IGJsb2NrIGlmIHRoZXJlIGlzIG9uZVxuICBpZiAoY3VycmVudEJsb2NrKSBibG9ja3MucHVzaChjdXJyZW50QmxvY2spO1xuXG4gIC8vIENvbnZlcnQgYmxvY2tzIHRvIGZvcm1hdHRlZCB0ZXh0XG4gIHJldHVybiBibG9ja3MubWFwKGJsb2NrID0+IHtcbiAgICBzd2l0Y2ggKGJsb2NrLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2hlYWRpbmcnOlxuICAgICAgICByZXR1cm4gYmxvY2suY29udGVudDtcbiAgICAgIGNhc2UgJ2xpc3QnOlxuICAgICAgICByZXR1cm4gYmxvY2suY29udGVudDtcbiAgICAgIGNhc2UgJ3F1b3RlJzpcbiAgICAgICAgcmV0dXJuICc+ICcgKyBibG9jay5jb250ZW50O1xuICAgICAgY2FzZSAnc2lkZWJhcic6XG4gICAgICAgIHJldHVybiAnLS0tXFxuJyArIGJsb2NrLmNvbnRlbnQgKyAnXFxuLS0tJztcbiAgICAgIGNhc2UgJ3BhcmFncmFwaCc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYmxvY2suY29udGVudDtcbiAgICB9XG4gIH0pLmpvaW4oJ1xcblxcbicpO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb25zXG5mdW5jdGlvbiBpc1BhZ2VOdW1iZXIobGluZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiAvXlxcZCskLy50ZXN0KGxpbmUudHJpbSgpKTtcbn1cblxuZnVuY3Rpb24gaXNQYWdlSGVhZGVyKGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gL14oRW50cmVwcmVuZXVyc2hpcCBCb290Y2FtcHxEZWZ5IFZlbnR1cmVzKS9pLnRlc3QobGluZS50cmltKCkpO1xufVxuXG5mdW5jdGlvbiBpc0NoYXB0ZXJIZWFkaW5nKGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gL15DaGFwdGVyXFxzK1xcZCsvaS50ZXN0KGxpbmUudHJpbSgpKSB8fCBcbiAgICAgICAgIC9eW0EtWl1bQS1aXFxzXXsxMCx9Ly50ZXN0KGxpbmUudHJpbSgpKTtcbn1cblxuZnVuY3Rpb24gaXNCdWxsZXRQb2ludChsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9eW+KAosK34paq4par4pem4oCj4oGDXVxccy8udGVzdChsaW5lLnRyaW0oKSk7XG59XG5cbmZ1bmN0aW9uIGlzUXVvdGUobGluZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiAvXltcIlwiXS8udGVzdChsaW5lLnRyaW0oKSkgfHwgL156XFxzLy50ZXN0KGxpbmUudHJpbSgpKTtcbn1cblxuZnVuY3Rpb24gaXNTaWRlYmFyKGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gL14oTm90ZTp8VGlwOnxJbXBvcnRhbnQ6KS8udGVzdChsaW5lLnRyaW0oKSk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEhlYWRpbmcobGluZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgbGV2ZWwgPSBnZXRIZWFkaW5nTGV2ZWwobGluZSk7XG4gIGNvbnN0IHRleHQgPSBsaW5lLnJlcGxhY2UoL15DaGFwdGVyXFxzKyhcXGQrKTpcXHMqL2ksICdDaGFwdGVyICQxOiAnKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKVxuICAgICAgICAgICAgICAgICAgLnRyaW0oKTtcbiAgcmV0dXJuICcjJy5yZXBlYXQobGV2ZWwpICsgJyAnICsgdGV4dDtcbn1cblxuZnVuY3Rpb24gZ2V0SGVhZGluZ0xldmVsKGxpbmU6IHN0cmluZyk6IG51bWJlciB7XG4gIGlmICgvXkNoYXB0ZXJcXHMrXFxkKy9pLnRlc3QobGluZSkpIHJldHVybiAxO1xuICBpZiAoL15TZWN0aW9uL2kudGVzdChsaW5lKSkgcmV0dXJuIDI7XG4gIGlmICgvXlxcZCtcXC4vaS50ZXN0KGxpbmUpKSByZXR1cm4gMztcbiAgcmV0dXJuIDI7IC8vIERlZmF1bHQgZm9yIG90aGVyIGhlYWRpbmdzXG59XG5cbmZ1bmN0aW9uIGZvcm1hdExpc3RJdGVtKGxpbmU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiAn4oCiICcgKyBsaW5lLnJlcGxhY2UoL15b4oCiwrfilqrilqvil6bigKPigYNdXFxzKi8sICcnKS50cmltKCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFF1b3RlKGxpbmU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBsaW5lLnJlcGxhY2UoL15bXCJcIl0vLCAnJykucmVwbGFjZSgvXnpcXHMvLCAnJykudHJpbSgpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRTaWRlYmFyKGxpbmU6IHN0cmluZywgbGluZXM6IHN0cmluZ1tdLCBjdXJyZW50SW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gIC8vIEV4dHJhY3QgdGhlIHNpZGViYXIgY29udGVudFxuICBsZXQgY29udGVudCA9IGxpbmUudHJpbSgpO1xuICBsZXQgaSA9IGN1cnJlbnRJbmRleCArIDE7XG4gIHdoaWxlIChpIDwgbGluZXMubGVuZ3RoICYmICFpc0VtcHR5T3JTZXBhcmF0b3IobGluZXNbaV0pKSB7XG4gICAgY29udGVudCArPSAnXFxuJyArIGxpbmVzW2ldLnRyaW0oKTtcbiAgICBpKys7XG4gIH1cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbmZ1bmN0aW9uIGNvdW50U2lkZWJhckxpbmVzKGxpbmVzOiBzdHJpbmdbXSwgc3RhcnRJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgbGV0IGNvdW50ID0gMDtcbiAgbGV0IGkgPSBzdGFydEluZGV4ICsgMTtcbiAgd2hpbGUgKGkgPCBsaW5lcy5sZW5ndGggJiYgIWlzRW1wdHlPclNlcGFyYXRvcihsaW5lc1tpXSkpIHtcbiAgICBjb3VudCsrO1xuICAgIGkrKztcbiAgfVxuICByZXR1cm4gY291bnQ7XG59XG5cbmZ1bmN0aW9uIGlzRW1wdHlPclNlcGFyYXRvcihsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuICFsaW5lLnRyaW0oKSB8fCAvXi17Myx9JC8udGVzdChsaW5lLnRyaW0oKSk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFBhcmFncmFwaChsaW5lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbGluZS5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpO1xufVxuXG5mdW5jdGlvbiBzaG91bGRBcHBlbmRUb1BhcmFncmFwaChsaW5lOiBzdHJpbmcsIGN1cnJlbnRDb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gQ2hlY2sgaWYgdGhpcyBsaW5lIGxvb2tzIGxpa2UgaXQgY29udGludWVzIHRoZSBwYXJhZ3JhcGhcbiAgLy8gRm9yIGV4YW1wbGUsIGlmIGl0IGRvZXNuJ3Qgc3RhcnQgd2l0aCBhIGNhcGl0YWwgbGV0dGVyLCBpdCBtaWdodCBiZSBhIGNvbnRpbnVhdGlvblxuICByZXR1cm4gIWlzQ2hhcHRlckhlYWRpbmcobGluZSkgJiYgXG4gICAgICAgICAhaXNCdWxsZXRQb2ludChsaW5lKSAmJiBcbiAgICAgICAgICFpc1F1b3RlKGxpbmUpICYmIFxuICAgICAgICAgIWlzU2lkZWJhcihsaW5lKSAmJlxuICAgICAgICAgIS9eW0EtWl0vLnRlc3QobGluZS50cmltKCkpICYmIFxuICAgICAgICAgY3VycmVudENvbnRlbnQubGVuZ3RoID4gMDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RCb29rcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coYFJlYWRpbmcgZGlyZWN0b3J5OiAke1BERl9ESVJ9YCk7XG5cbiAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGUgZGlyZWN0b3J5IGV4aXN0c1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBmcy5hY2Nlc3MoUERGX0RJUik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBEaXJlY3RvcnkgJHtQREZfRElSfSBkb2VzIG5vdCBleGlzdCBvciBpcyBub3QgYWNjZXNzaWJsZWApO1xuICAgICAgLy8gQ3JlYXRlIHRoZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgYXdhaXQgZnMubWtkaXIoUERGX0RJUiwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICByZXR1cm4gW107IC8vIFJldHVybiBlbXB0eSBhcnJheSBzaW5jZSB3ZSBqdXN0IGNyZWF0ZWQgdGhlIGRpcmVjdG9yeVxuICAgIH1cblxuICAgIC8vIFJlYWQgYWxsIGZpbGVzIGluIHRoZSBkaXJlY3RvcnlcbiAgICBjb25zdCBmaWxlcyA9IGF3YWl0IGZzLnJlYWRkaXIoUERGX0RJUik7XG5cbiAgICAvLyBGaWx0ZXIgZm9yIFBERiBmaWxlc1xuICAgIGNvbnN0IHBkZkZpbGVzID0gW107XG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzdGF0ID0gYXdhaXQgZnMuc3RhdChwYXRoLmpvaW4oUERGX0RJUiwgZmlsZSkpO1xuICAgICAgICBpZiAoc3RhdC5pc0ZpbGUoKSAmJiBmaWxlLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy5wZGYnKSkge1xuICAgICAgICAgIHBkZkZpbGVzLnB1c2goZmlsZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjaGVja2luZyBmaWxlICR7ZmlsZX06YCwgZXJyKTtcbiAgICAgICAgLy8gQ29udGludWUgd2l0aCBvdGhlciBmaWxlc1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke3BkZkZpbGVzLmxlbmd0aH0gUERGIGZpbGVzYCk7XG4gICAgcmV0dXJuIHBkZkZpbGVzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlYWRpbmcgZGlyZWN0b3J5ICR7UERGX0RJUn06YCwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbnR5cGUgQ2hhcHRlciA9IHsgaWQ6IG51bWJlcjsgdGl0bGU6IHN0cmluZzsgc3RhcnRQYWdlOiBudW1iZXI7IGVuZFBhZ2U6IG51bWJlciB9O1xuXG5jb25zdCBDSEFQVEVSX1BBVFRFUk5TID0gW1xuICAvXlxccypjaGFwdGVyXFxzK1xcZCtcXHMqOi9pLFxuICAvXlxccypjaGFwdGVyXFxzK1xcZCtcXHMqW2EtekEtWl0vaSxcbiAgL15cXHMqY2hhcHRlclxccytbaXZ4bGNkbV0rXFxzKjovaSxcbiAgL15cXHMqY2hhcHRlclxccytbaXZ4bGNkbV0rXFxzKlthLXpBLVpdL2ksXG4gIC9eXFxzKmNoXFwuXFxzKlxcZCtcXHMqOi9pLFxuICAvXlxccypjaFxcLlxccypcXGQrXFxzKlthLXpBLVpdL2ksXG4gIC9eXFxzKmJvb2tcXHMrXFxkK1xccyo6L2ksXG4gIC9eXFxzKmJvb2tcXHMrXFxkK1xccypbYS16QS1aXS9pLFxuICAvXlxccypwYXJ0XFxzK1xcZCtcXHMqOi9pLFxuICAvXlxccypwYXJ0XFxzK1xcZCtcXHMqW2EtekEtWl0vaVxuXTtcblxuZnVuY3Rpb24gbG9va3NMaWtlQ2hhcHRlckhlYWRpbmcobGluZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHMgPSBsaW5lLnRyaW0oKTtcbiAgaWYgKHMubGVuZ3RoID09PSAwIHx8IHMubGVuZ3RoID4gODApIHJldHVybiBmYWxzZTtcblxuICAvLyBNdXN0IHN0YXJ0IHdpdGggXCJDaGFwdGVyXCIgb3Igc2ltaWxhclxuICBpZiAoIS9eKGNoYXB0ZXJ8Y2hcXC58Ym9va3xwYXJ0KVxccysvaS50ZXN0KHMpKSByZXR1cm4gZmFsc2U7XG5cbiAgLy8gTXVzdCBjb250YWluIGEgbnVtYmVyIG9yIHJvbWFuIG51bWVyYWxcbiAgaWYgKCEvXFxkK3xbaXZ4bGNkbV0rL2kudGVzdChzKSkgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIE11c3QgaGF2ZSBzb21lIGRlc2NyaXB0aXZlIHRleHQgYWZ0ZXIgdGhlIG51bWJlclxuICBjb25zdCBwYXJ0cyA9IHMuc3BsaXQoL1xccysvKTtcbiAgaWYgKHBhcnRzLmxlbmd0aCA8IDMpIHJldHVybiBmYWxzZTtcblxuICAvLyBDaGVjayBpZiB0aGVyZSdzIG1lYW5pbmdmdWwgdGV4dCBhZnRlciB0aGUgY2hhcHRlciBpZGVudGlmaWVyXG4gIGNvbnN0IG1lYW5pbmdmdWxUZXh0ID0gcGFydHMuc2xpY2UoMikuam9pbihcIiBcIik7XG4gIGlmIChtZWFuaW5nZnVsVGV4dC5sZW5ndGggPCAzKSByZXR1cm4gZmFsc2U7XG5cbiAgLy8gRXhjbHVkZSBhcHBlbmRpeCBzZWN0aW9ucywgcnVicmljcywgZXRjLlxuICBpZiAoL3J1YnJpY3xhcHBlbmRpeHxjYXNlIHN0dWR5fHByb21pc2UgY2FyZHMvaS50ZXN0KG1lYW5pbmdmdWxUZXh0KSkgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBsb29rc0xpa2VBbGxDYXBzSGVhZGluZyhsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgcyA9IGxpbmUudHJpbSgpO1xuICBpZiAocy5sZW5ndGggPT09IDAgfHwgcy5sZW5ndGggPiA2MCkgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIE11c3QgYmUgcmVhc29uYWJseSBsb25nIHRvIGJlIGEgaGVhZGluZ1xuICBpZiAocy5sZW5ndGggPCAxMCkgcmV0dXJuIGZhbHNlO1xuXG4gIGNvbnN0IGxldHRlcnMgPSBzLnJlcGxhY2UoL1teQS1aYS16XS9nLCBcIlwiKTtcbiAgaWYgKGxldHRlcnMubGVuZ3RoIDwgNSkgcmV0dXJuIGZhbHNlOyAvLyBSZXF1aXJlIG1vcmUgbGV0dGVyc1xuXG4gIC8vIE11c3QgYmUgYWxsIGNhcHNcbiAgaWYgKHMgIT09IHMudG9VcHBlckNhc2UoKSkgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIE11c3Qgbm90IGJlIGp1c3QgcmVwZWF0ZWQgY2hhcmFjdGVycyBvciB2ZXJ5IHNob3J0IHdvcmRzXG4gIGNvbnN0IHdvcmRzID0gcy5zcGxpdCgvXFxzKy8pO1xuICBpZiAod29yZHMubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIENoZWNrIGlmIGl0IGxvb2tzIGxpa2UgYSBtZWFuaW5nZnVsIGhlYWRpbmcgKG5vdCBqdXN0IHJhbmRvbSBjYXBzKVxuICBjb25zdCBoYXNNZWFuaW5nZnVsV29yZHMgPSB3b3Jkcy5zb21lKHdvcmQgPT4gd29yZC5sZW5ndGggPiAyKTtcbiAgaWYgKCFoYXNNZWFuaW5nZnVsV29yZHMpIHJldHVybiBmYWxzZTtcblxuICAvLyBFeGNsdWRlIGFwcGVuZGl4IHNlY3Rpb25zLCBydWJyaWNzLCBldGMuXG4gIGlmICgvcnVicmljfGFwcGVuZGl4fGNhc2Ugc3R1ZHl8cHJvbWlzZSBjYXJkcy9pLnRlc3QocykpIHJldHVybiBmYWxzZTtcblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4dHJhY3RDaGFwdGVycyhib29rRmlsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8Q2hhcHRlcltdPiB7XG4gIGNvbnNvbGUubG9nKGBFeHRyYWN0aW5nIGNoYXB0ZXJzIGZyb20gJHtib29rRmlsZU5hbWV9YCk7XG4gIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5yZXNvbHZlKFBERl9ESVIsIGJvb2tGaWxlTmFtZSk7XG4gIGNvbnNvbGUubG9nKGBGdWxsIHBhdGg6ICR7ZmlsZVBhdGh9YCk7XG5cbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBpZiBmaWxlIGV4aXN0c1xuICAgIGF3YWl0IGZzLmFjY2VzcyhmaWxlUGF0aCk7XG4gICAgY29uc29sZS5sb2coYEZpbGUgZXhpc3RzOiAke2ZpbGVQYXRofWApO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGBGaWxlIGRvZXMgbm90IGV4aXN0OiAke2ZpbGVQYXRofWApO1xuICAgIHRocm93IG5ldyBFcnJvcihgUERGIGZpbGUgbm90IGZvdW5kOiAke2Jvb2tGaWxlTmFtZX1gKTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKGBSZWFkaW5nIGZpbGU6ICR7ZmlsZVBhdGh9YCk7XG4gIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGVQYXRoKTtcbiAgY29uc29sZS5sb2coYEZpbGUgc2l6ZTogJHtidWZmZXIubGVuZ3RofSBieXRlc2ApO1xuXG4gIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICBjb25zb2xlLmxvZyhgQ3JlYXRpbmcgUERGLmpzIGRvY3VtZW50YCk7XG4gIGNvbnN0IGxvYWRpbmdUYXNrID0gcGRmanNMaWIuZ2V0RG9jdW1lbnQoeyBcbiAgICBkYXRhLCBcbiAgICBkaXNhYmxlV29ya2VyOiB0cnVlXG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKGBXYWl0aW5nIGZvciBQREYgdG8gbG9hZGApO1xuICBjb25zdCBwZGYgPSBhd2FpdCBsb2FkaW5nVGFzay5wcm9taXNlO1xuICBjb25zdCBudW1QYWdlczogbnVtYmVyID0gcGRmLm51bVBhZ2VzO1xuICBjb25zb2xlLmxvZyhgUERGIGxvYWRlZCB3aXRoICR7bnVtUGFnZXN9IHBhZ2VzYCk7XG5cbiAgdHlwZSBIaXQgPSB7IHBhZ2U6IG51bWJlcjsgdGl0bGU6IHN0cmluZyB9O1xuICBjb25zdCBoaXRzOiBIaXRbXSA9IFtdO1xuXG4gIC8vIFNjYW4gZmlyc3QgfjUwIGxpbmVzIHBlciBwYWdlIGZvciBoZWFkaW5nIGNhbmRpZGF0ZXNcbiAgY29uc29sZS5sb2coYFN0YXJ0aW5nIHRvIHNjYW4gJHtudW1QYWdlc30gcGFnZXMgZm9yIGNoYXB0ZXIgaGVhZGluZ3NgKTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbnVtUGFnZXM7IGkrKykge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBwYWdlICR7aX0vJHtudW1QYWdlc31gKTtcbiAgICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBwZGYuZ2V0UGFnZShpKTtcbiAgICAgIGNvbnNvbGUubG9nKGBHZXR0aW5nIHRleHQgY29udGVudCBmb3IgcGFnZSAke2l9YCk7XG4gICAgICBjb25zdCB0YyA9IGF3YWl0IHBhZ2UuZ2V0VGV4dENvbnRlbnQoKTtcbiAgICAgIC8vIEpvaW4gaW50byBsaW5lc1xuICAgICAgY29uc3QgaXRlbXMgPSB0Yy5pdGVtcyBhcyBBcnJheTx7IHN0cjogc3RyaW5nIH0+O1xuICAgICAgY29uc3QgcmF3ID0gaXRlbXMubWFwKChpdCkgPT4gaXQuc3RyKS5qb2luKFwiXFxuXCIpO1xuICAgICAgY29uc3QgbGluZXMgPSByYXcuc3BsaXQoL1xccj9cXG4vKS5tYXAoKGwpID0+IGwudHJpbSgpKS5maWx0ZXIoQm9vbGVhbikuc2xpY2UoMCwgNjApO1xuICAgICAgY29uc29sZS5sb2coYEZvdW5kICR7bGluZXMubGVuZ3RofSBsaW5lcyBvZiB0ZXh0IG9uIHBhZ2UgJHtpfWApO1xuXG4gICAgICBjb25zdCBmb3VuZCA9IGxpbmVzLmZpbmQoKGxuKSA9PiBcbiAgICAgICAgQ0hBUFRFUl9QQVRURVJOUy5zb21lKChyZSkgPT4gcmUudGVzdChsbikpIHx8IFxuICAgICAgICBsb29rc0xpa2VDaGFwdGVySGVhZGluZyhsbikgfHwgXG4gICAgICAgIGxvb2tzTGlrZUFsbENhcHNIZWFkaW5nKGxuKVxuICAgICAgKTtcbiAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgY2hhcHRlciBoZWFkaW5nIG9uIHBhZ2UgJHtpfTogXCIke2ZvdW5kfVwiYCk7XG4gICAgICAgIGhpdHMucHVzaCh7IHBhZ2U6IGksIHRpdGxlOiBmb3VuZC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIHBhZ2UgJHtpfTpgLCBlcnIpO1xuICAgICAgLy8gQ29udGludWUgd2l0aCBuZXh0IHBhZ2VcbiAgICB9XG4gIH1cbiAgY29uc29sZS5sb2coYEZpbmlzaGVkIHNjYW5uaW5nIHBhZ2VzLCBmb3VuZCAke2hpdHMubGVuZ3RofSBwb3RlbnRpYWwgY2hhcHRlciBoZWFkaW5nc2ApO1xuXG4gIGxldCBjaGFwdGVyczogQ2hhcHRlcltdID0gW107XG4gIGlmIChoaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGNoYXB0ZXJzID0gW3sgaWQ6IDEsIHRpdGxlOiBcIkZ1bGwgRG9jdW1lbnRcIiwgc3RhcnRQYWdlOiAxLCBlbmRQYWdlOiBudW1QYWdlcyB9XTtcbiAgfSBlbHNlIHtcbiAgICAvLyBEZWR1cCBzaW1pbGFyIGhlYWRpbmdzIGFuZCBidWlsZCByYW5nZXNcbiAgICBjb25zdCB1bmlxOiBIaXRbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGl0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGhpdHNbaV07XG4gICAgICBjb25zdCBwcmV2ID0gdW5pcVt1bmlxLmxlbmd0aCAtIDFdO1xuXG4gICAgICAvLyBTa2lwIGlmIHRoaXMgaXMgdGhlIHNhbWUgaGVhZGluZyBvbiBhIGRpZmZlcmVudCBwYWdlXG4gICAgICBpZiAocHJldiAmJiBjdXJyZW50LnRpdGxlLnRvTG93ZXJDYXNlKCkgPT09IHByZXYudGl0bGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2tpcCBpZiB0aGlzIGlzIGp1c3QgYSBjb250aW51YXRpb24gb2YgdGhlIHNhbWUgY2hhcHRlclxuICAgICAgaWYgKHByZXYgJiYgY3VycmVudC5wYWdlIC0gcHJldi5wYWdlIDwgMykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdW5pcS5wdXNoKGN1cnJlbnQpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBBZnRlciBkZWR1cGxpY2F0aW9uLCBmb3VuZCAke3VuaXEubGVuZ3RofSB1bmlxdWUgY2hhcHRlciBoZWFkaW5nc2ApO1xuXG4gICAgLy8gQnVpbGQgY2hhcHRlciByYW5nZXNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVuaXEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gdW5pcVtpXS5wYWdlO1xuICAgICAgY29uc3QgZW5kID0gaSArIDEgPCB1bmlxLmxlbmd0aCA/IHVuaXFbaSArIDFdLnBhZ2UgLSAxIDogbnVtUGFnZXM7XG4gICAgICBsZXQgdGl0bGUgPSB1bmlxW2ldLnRpdGxlO1xuXG4gICAgICAvLyBOb3JtYWxpemUgY2hhcHRlciB0aXRsZXNcbiAgICAgIGlmICgvXlxccypjaGFwdGVyXFxiL2kudGVzdCh0aXRsZSkpIHtcbiAgICAgICAgdGl0bGUgPSB0aXRsZS5yZXBsYWNlKC9eXFxzKmNoYXB0ZXJcXHMqL2ksIFwiXCIpLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKTtcbiAgICAgICAgdGl0bGUgPSBgQ2hhcHRlciAke3RpdGxlfWA7XG4gICAgICB9XG5cbiAgICAgIGNoYXB0ZXJzLnB1c2goeyBpZDogaSArIDEsIHRpdGxlLCBzdGFydFBhZ2U6IHN0YXJ0LCBlbmRQYWdlOiBlbmQgfSk7XG4gICAgfVxuXG4gICAgLy8gUG9zdC1wcm9jZXNzOiBmaWx0ZXIgdG8gb25seSBtYWluIG51bWJlcmVkIGNoYXB0ZXJzICgxLTIyKSBhbmQgbWVyZ2UgZHVwbGljYXRlc1xuICAgIGNvbnN0IGNoYXB0ZXJNYXAgPSBuZXcgTWFwPG51bWJlciwgQ2hhcHRlcj4oKTtcblxuICAgIGNoYXB0ZXJzLmZvckVhY2goY2ggPT4ge1xuICAgICAgY29uc3QgY2hhcHRlck1hdGNoID0gY2gudGl0bGUubWF0Y2goL15DaGFwdGVyXFxzKyhcXGQrKS9pKTtcbiAgICAgIGlmICghY2hhcHRlck1hdGNoKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IGNoYXB0ZXJOdW0gPSBwYXJzZUludChjaGFwdGVyTWF0Y2hbMV0pO1xuICAgICAgaWYgKGNoYXB0ZXJOdW0gPCAxIHx8IGNoYXB0ZXJOdW0gPiAyMikgcmV0dXJuO1xuXG4gICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgdGhpcyBjaGFwdGVyIG51bWJlciwgbWVyZ2UgdGhlbVxuICAgICAgaWYgKGNoYXB0ZXJNYXAuaGFzKGNoYXB0ZXJOdW0pKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gY2hhcHRlck1hcC5nZXQoY2hhcHRlck51bSkhO1xuICAgICAgICAvLyBVc2UgdGhlIGxvbmdlciB0aXRsZSBhbmQgbWVyZ2UgdGhlIHBhZ2UgcmFuZ2VzXG4gICAgICAgIGlmIChjaC50aXRsZS5sZW5ndGggPiBleGlzdGluZy50aXRsZS5sZW5ndGgpIHtcbiAgICAgICAgICBleGlzdGluZy50aXRsZSA9IGNoLnRpdGxlO1xuICAgICAgICB9XG4gICAgICAgIGV4aXN0aW5nLmVuZFBhZ2UgPSBNYXRoLm1heChleGlzdGluZy5lbmRQYWdlLCBjaC5lbmRQYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYXB0ZXJNYXAuc2V0KGNoYXB0ZXJOdW0sIHsgLi4uY2gsIGlkOiBjaGFwdGVyTnVtIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGNoYXB0ZXJNYXAuc2l6ZSA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKGBGaWx0ZXJlZCB0byAke2NoYXB0ZXJNYXAuc2l6ZX0gbWFpbiBjaGFwdGVycyAoMS0yMilgKTtcbiAgICAgIGNoYXB0ZXJzID0gQXJyYXkuZnJvbShjaGFwdGVyTWFwLnZhbHVlcygpKS5zb3J0KChhLCBiKSA9PiBhLmlkIC0gYi5pZCk7XG5cbiAgICAgIC8vIFJlZmluZSBjaGFwdGVyIGJvdW5kYXJpZXMgdG8gZXhjbHVkZSBhcHBlbmRpeCBjb250ZW50XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXB0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBjaGFwdGVyc1tpXTtcbiAgICAgICAgY29uc3QgbmV4dCA9IGNoYXB0ZXJzW2kgKyAxXTtcblxuICAgICAgICAvLyBJZiB0aGlzIGNoYXB0ZXIgc3BhbnMgdG9vIG1hbnkgcGFnZXMsIGl0IG1pZ2h0IGluY2x1ZGUgYXBwZW5kaXggY29udGVudFxuICAgICAgICBpZiAoY3VycmVudC5lbmRQYWdlIC0gY3VycmVudC5zdGFydFBhZ2UgPiAxMDApIHtcbiAgICAgICAgICAvLyBMb29rIGZvciB0aGUgbmV4dCBjaGFwdGVyIHN0YXJ0IHRvIGdldCBhIGJldHRlciBib3VuZGFyeVxuICAgICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICBjdXJyZW50LmVuZFBhZ2UgPSBuZXh0LnN0YXJ0UGFnZSAtIDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciB0aGUgbGFzdCBjaGFwdGVyLCBsaW1pdCBpdCB0byBhIHJlYXNvbmFibGUgc2l6ZVxuICAgICAgICAgICAgY3VycmVudC5lbmRQYWdlID0gTWF0aC5taW4oY3VycmVudC5lbmRQYWdlLCBjdXJyZW50LnN0YXJ0UGFnZSArIDUwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY2hhcHRlcnM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHRyYWN0VGV4dEZvclJhbmdlKGJvb2tGaWxlTmFtZTogc3RyaW5nLCBzdGFydFBhZ2U6IG51bWJlciwgZW5kUGFnZTogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc29sZS5sb2coYEV4dHJhY3RpbmcgdGV4dCBmcm9tICR7Ym9va0ZpbGVOYW1lfSBwYWdlcyAke3N0YXJ0UGFnZX0tJHtlbmRQYWdlfWApO1xuICBjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShQREZfRElSLCBib29rRmlsZU5hbWUpO1xuICBjb25zb2xlLmxvZyhgRnVsbCBwYXRoOiAke2ZpbGVQYXRofWApO1xuXG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgZmlsZSBleGlzdHNcbiAgICBhd2FpdCBmcy5hY2Nlc3MoZmlsZVBhdGgpO1xuICAgIGNvbnNvbGUubG9nKGBGaWxlIGV4aXN0czogJHtmaWxlUGF0aH1gKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihgRmlsZSBkb2VzIG5vdCBleGlzdDogJHtmaWxlUGF0aH1gKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFBERiBmaWxlIG5vdCBmb3VuZDogJHtib29rRmlsZU5hbWV9YCk7XG4gIH1cblxuICBjb25zb2xlLmxvZyhgUmVhZGluZyBmaWxlOiAke2ZpbGVQYXRofWApO1xuICBjb25zdCBidWZmZXIgPSBhd2FpdCBmcy5yZWFkRmlsZShmaWxlUGF0aCk7XG4gIGNvbnNvbGUubG9nKGBGaWxlIHNpemU6ICR7YnVmZmVyLmxlbmd0aH0gYnl0ZXNgKTtcblxuICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgY29uc29sZS5sb2coYENyZWF0aW5nIFBERi5qcyBkb2N1bWVudGApO1xuICBjb25zdCBsb2FkaW5nVGFzayA9IHBkZmpzTGliLmdldERvY3VtZW50KHsgXG4gICAgZGF0YSwgXG4gICAgZGlzYWJsZVdvcmtlcjogdHJ1ZVxuICB9KTtcblxuICBjb25zb2xlLmxvZyhgV2FpdGluZyBmb3IgUERGIHRvIGxvYWRgKTtcbiAgY29uc3QgcGRmID0gYXdhaXQgbG9hZGluZ1Rhc2sucHJvbWlzZTtcbiAgY29uc29sZS5sb2coYFBERiBsb2FkZWQgd2l0aCAke3BkZi5udW1QYWdlc30gcGFnZXNgKTtcblxuICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgY29uc3QgcyA9IE1hdGgubWF4KDEsIHN0YXJ0UGFnZSk7XG4gIGNvbnN0IGUgPSBNYXRoLm1pbihlbmRQYWdlLCBwZGYubnVtUGFnZXMpO1xuICBjb25zb2xlLmxvZyhgRXh0cmFjdGluZyB0ZXh0IGZyb20gcGFnZXMgJHtzfSB0byAke2V9YCk7XG5cbiAgZm9yIChsZXQgaSA9IHM7IGkgPD0gZTsgaSsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIHBhZ2UgJHtpfS8ke2V9YCk7XG4gICAgICBjb25zdCBwYWdlID0gYXdhaXQgcGRmLmdldFBhZ2UoaSk7XG4gICAgICBjb25zb2xlLmxvZyhgR2V0dGluZyB0ZXh0IGNvbnRlbnQgZm9yIHBhZ2UgJHtpfWApO1xuICAgICAgY29uc3QgdGMgPSBhd2FpdCBwYWdlLmdldFRleHRDb250ZW50KCk7XG4gICAgICBjb25zdCBpdGVtcyA9IHRjLml0ZW1zIGFzIEFycmF5PHsgc3RyOiBzdHJpbmcgfT47XG4gICAgICBjb25zdCBwYWdlVGV4dCA9IGl0ZW1zLm1hcCgoaXQpID0+IGl0LnN0cikuam9pbihcIlxcblwiKTtcbiAgICAgIGNvbnNvbGUubG9nKGBFeHRyYWN0ZWQgJHtwYWdlVGV4dC5sZW5ndGh9IGNoYXJhY3RlcnMgZnJvbSBwYWdlICR7aX1gKTtcbiAgICAgIHBhcnRzLnB1c2gocGFnZVRleHQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBwYWdlICR7aX06YCwgZXJyKTtcbiAgICAgIC8vIENvbnRpbnVlIHdpdGggbmV4dCBwYWdlXG4gICAgICBwYXJ0cy5wdXNoKGBbRXJyb3IgZXh0cmFjdGluZyB0ZXh0IGZyb20gcGFnZSAke2l9XWApO1xuICAgIH1cbiAgfVxuICBjb25zb2xlLmxvZyhgRmluaXNoZWQgZXh0cmFjdGluZyB0ZXh0IGZyb20gJHtlLXMrMX0gcGFnZXNgKTtcblxuICAvLyBKb2luIHBhcnRzIGFuZCBkbyBiYXNpYyBjbGVhbnVwXG4gIGNvbnN0IHRleHQgPSBwYXJ0cy5qb2luKFwiXFxuXFxuXCIpXG4gICAgLnJlcGxhY2UoL1xcdTAwQTAvZywgXCIgXCIpXG4gICAgLnJlcGxhY2UoL1sgXFx0XStcXG4vZywgXCJcXG5cIilcbiAgICAucmVwbGFjZSgvXFxuezMsfS9nLCBcIlxcblxcblwiKVxuICAgIC50cmltKCk7XG5cbiAgLy8gQXBwbHkgYWR2YW5jZWQgdGV4dCBjbGVhbmluZyBhbmQgZm9ybWF0dGluZ1xuICByZXR1cm4gY2xlYW5BbmRGb3JtYXRUZXh0KHRleHQpO1xufVxuIl0sIm5hbWVzIjpbInBhdGgiLCJmcyIsInBkZmpzTGliIiwid29ya2VyUGF0aCIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiR2xvYmFsV29ya2VyT3B0aW9ucyIsIndvcmtlclNyYyIsIlBERl9ESVIiLCJyZXNvbHZlIiwiY2xlYW5BbmRGb3JtYXRUZXh0IiwicmF3VGV4dCIsImxpbmVzIiwic3BsaXQiLCJibG9ja3MiLCJjdXJyZW50QmxvY2siLCJpIiwibGVuZ3RoIiwibGluZSIsInRyaW0iLCJpc1BhZ2VOdW1iZXIiLCJpc1BhZ2VIZWFkZXIiLCJpc0NoYXB0ZXJIZWFkaW5nIiwicHVzaCIsInR5cGUiLCJjb250ZW50IiwiZm9ybWF0SGVhZGluZyIsImlzQnVsbGV0UG9pbnQiLCJmb3JtYXRMaXN0SXRlbSIsImlzUXVvdGUiLCJmb3JtYXRRdW90ZSIsImlzU2lkZWJhciIsImZvcm1hdFNpZGViYXIiLCJjb3VudFNpZGViYXJMaW5lcyIsImZvcm1hdFBhcmFncmFwaCIsInNob3VsZEFwcGVuZFRvUGFyYWdyYXBoIiwibWFwIiwiYmxvY2siLCJ0ZXN0IiwibGV2ZWwiLCJnZXRIZWFkaW5nTGV2ZWwiLCJ0ZXh0IiwicmVwbGFjZSIsInJlcGVhdCIsImN1cnJlbnRJbmRleCIsImlzRW1wdHlPclNlcGFyYXRvciIsInN0YXJ0SW5kZXgiLCJjb3VudCIsImN1cnJlbnRDb250ZW50IiwibGlzdEJvb2tzIiwiY29uc29sZSIsImxvZyIsImFjY2VzcyIsImVyciIsImVycm9yIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJmaWxlcyIsInJlYWRkaXIiLCJwZGZGaWxlcyIsImZpbGUiLCJzdGF0IiwiaXNGaWxlIiwidG9Mb3dlckNhc2UiLCJlbmRzV2l0aCIsIkNIQVBURVJfUEFUVEVSTlMiLCJsb29rc0xpa2VDaGFwdGVySGVhZGluZyIsInMiLCJwYXJ0cyIsIm1lYW5pbmdmdWxUZXh0Iiwic2xpY2UiLCJsb29rc0xpa2VBbGxDYXBzSGVhZGluZyIsImxldHRlcnMiLCJ0b1VwcGVyQ2FzZSIsIndvcmRzIiwiaGFzTWVhbmluZ2Z1bFdvcmRzIiwic29tZSIsIndvcmQiLCJleHRyYWN0Q2hhcHRlcnMiLCJib29rRmlsZU5hbWUiLCJmaWxlUGF0aCIsIkVycm9yIiwiYnVmZmVyIiwicmVhZEZpbGUiLCJkYXRhIiwiVWludDhBcnJheSIsImxvYWRpbmdUYXNrIiwiZ2V0RG9jdW1lbnQiLCJkaXNhYmxlV29ya2VyIiwicGRmIiwicHJvbWlzZSIsIm51bVBhZ2VzIiwiaGl0cyIsInBhZ2UiLCJnZXRQYWdlIiwidGMiLCJnZXRUZXh0Q29udGVudCIsIml0ZW1zIiwicmF3IiwiaXQiLCJzdHIiLCJsIiwiZmlsdGVyIiwiQm9vbGVhbiIsImZvdW5kIiwiZmluZCIsImxuIiwicmUiLCJ0aXRsZSIsImNoYXB0ZXJzIiwiaWQiLCJzdGFydFBhZ2UiLCJlbmRQYWdlIiwidW5pcSIsImN1cnJlbnQiLCJwcmV2Iiwic3RhcnQiLCJlbmQiLCJjaGFwdGVyTWFwIiwiTWFwIiwiZm9yRWFjaCIsImNoIiwiY2hhcHRlck1hdGNoIiwibWF0Y2giLCJjaGFwdGVyTnVtIiwicGFyc2VJbnQiLCJoYXMiLCJleGlzdGluZyIsImdldCIsIk1hdGgiLCJtYXgiLCJzZXQiLCJzaXplIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwic29ydCIsImEiLCJiIiwibmV4dCIsIm1pbiIsImV4dHJhY3RUZXh0Rm9yUmFuZ2UiLCJlIiwicGFnZVRleHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/pdf.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/pdfjs-dist"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute&page=%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbooks%2F%5Bbook%5D%2Fchapters%2Froute.ts&appDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fanthonymiller%2Fworkspaces%2Fnext_book_reader&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();